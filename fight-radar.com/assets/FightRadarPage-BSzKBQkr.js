import{q as gt,p as Je,l as L,C as b,z as T,r as M,A as e,h as wt,j as ut,f as E,m as Ze,$ as St,i as oe,c as s,u as d,S as Nt,t as $,B as ke,s as Pe,b as D,o as pt,I as mt,n as Be,x as o,y as _,J as vt,T as _a,k as lt,D as Ge,E as ze,Q as Mt,U as ha,V as xt,W as ht,Y as ga,Z as Gt,_ as zt,a0 as Tt,a as ua,a1 as pa,w as ma,F as fa,K as yt,a2 as Et}from"./lucide-CFoebsfS.js";import{H as ya}from"./highcharts-B6Q7ZKVu.js";import"./highcharts-more-sARtgawo.js";import{H as ba}from"./Header-tZijFwiS.js";import{$ as ft,n as Bt,A as ct,a as wa,g as _t,b as Da,u as It,c as Fa}from"./index-DFQZKW-T.js";import{c as Ft,g as $t,f as ka,a as Ot,p as At,b as kt,d as Pt,e as Lt}from"./fighters_service-CnPERkz8.js";import{R as Ra,a as Ht}from"./RadarChart-CrjA-ncK.js";import{F as xa}from"./FindYoutubeHighlights-CWAHTT-Y.js";import"./highcharts-DyRVWUji.js";var Ta=E('<img class="svelte-gkl5a1"/>'),Ka=E('<div class="dropdown-icon svelte-gkl5a1"><!></div>'),Ca=E("<!> <span> </span>",1),Sa=E("<span> </span>"),Na=E('<img class="svelte-gkl5a1"/>'),Ma=E('<div class="dropdown-icon svelte-gkl5a1"><!></div>'),Ea=E('<button type="button"><!> <span> </span></button>'),Ia=E('<div class="no-results svelte-gkl5a1"> </div>'),$a=E('<div class="dropdown-menu svelte-gkl5a1"><div class="search-container svelte-gkl5a1"><input class="search-input svelte-gkl5a1" type="text" aria-label="Search fighters"/></div> <div class="dropdown-options svelte-gkl5a1" role="listbox"><button type="button"><span> </span></button> <!></div></div>'),Oa=E('<div class="dropdown svelte-gkl5a1"><button role="combobox" aria-haspopup="listbox"><div class="dropdown-content svelte-gkl5a1"><!></div> <div><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-gkl5a1"><path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></button> <!></div>');function Wt(j,t){gt(t,!1);const[i,h]=mt(),n=()=>vt(ft,"$_",i),a=T(),l=T();let c=Je(t,"id",8),g=Je(t,"placeholder",8,""),v=Je(t,"disabled",8,!0),m=Je(t,"options",24,()=>[]),f=Je(t,"selectedValue",12,""),y=Je(t,"onSelectionChange",8,void 0),R=T(!1),J=T(),ae=T(),A=T("");function X(){v()||(b(R,!e(R)),e(R)&&setTimeout(()=>e(ae)?.focus(),0))}function Z(C){f(C.value),b(A,""),b(R,!1),y()&&y()(C.value,C)}function ie(C){const he=C.target;b(A,he.value)}function F(C){C.key==="Enter"&&e(l).length>0?(Z(e(l)[0]),C.preventDefault()):C.key==="Escape"&&(b(A,""),b(R,!1))}function k(C){e(J)&&!e(J).contains(C.target)&&(b(R,!1),b(A,""))}function S(C){C.key==="Escape"&&b(R,!1)}L(()=>(M(m()),M(f())),()=>{b(a,m().find(C=>C.value===f()))}),L(()=>(e(A),M(m()),Ft),()=>{b(l,e(A)?m().filter(C=>Ft(C.label.toLowerCase()).includes(Ft(e(A).toLowerCase()))):m())}),wt(),ut();var G=Oa();Ze("click",St,k),Ze("keydown",St,S);var K=s(G);let be;var O=s(K),U=s(O);{var ve=C=>{var he=Ca(),Te=Be(he);{var De=q=>{var $e=Ta();$(()=>{ke($e,"src",(e(a),o(()=>e(a).imageUrl))),ke($e,"alt",(e(a),o(()=>e(a).label)))}),D(q,$e)},Le=q=>{var $e=lt(),Xe=Be($e);{var it=He=>{var fe=Ka(),Ce=s(fe);Mt(Ce,()=>e(a).iconComponent,(Ye,Qe)=>{Qe(Ye,{size:16})}),D(He,fe)};oe(Xe,He=>{e(a),o(()=>e(a)?.iconComponent)&&He(it)},!0)}D(q,$e)};oe(Te,q=>{e(a),o(()=>e(a)?.imageUrl)?q(De):q(Le,!1)})}var Ie=d(Te,2),qe=s(Ie);$(()=>_(qe,(e(a),o(()=>e(a).label)))),D(C,he)},z=C=>{var he=Sa(),Te=s(he);$(De=>_(Te,De),[()=>(M(g()),n(),o(()=>g()||n()("common.select_option")))]),D(C,he)};oe(U,C=>{e(a)?C(ve):C(z,!1)})}var xe=d(O,2);let Ee;var le=d(K,2);{var Re=C=>{var he=$a(),Te=s(he),De=s(Te);Nt(De,fe=>b(ae,fe),()=>e(ae));var Le=d(Te,2),Ie=s(Le);let qe;var q=s(Ie),$e=s(q),Xe=d(Ie,2);{var it=fe=>{var Ce=lt(),Ye=Be(Ce);Ge(Ye,1,()=>e(l),ze,(Qe,ue)=>{var Ne=Ea();let et;var st=s(Ne);{var ot=I=>{var Y=Na();$(()=>{ke(Y,"src",(e(ue),o(()=>e(ue).imageUrl))),ke(Y,"alt",(e(ue),o(()=>e(ue).label)))}),Ze("error",Y,se=>{se.currentTarget.style.display="none"}),D(I,Y)},u=I=>{var Y=lt(),se=Be(Y);{var we=de=>{var Ke=Ma(),Oe=s(Ke);Mt(Oe,()=>e(ue).iconComponent,(We,Ue)=>{Ue(We,{size:16})}),D(de,Ke)};oe(se,de=>{e(ue),o(()=>e(ue)?.iconComponent)&&de(we)},!0)}D(I,Y)};oe(st,I=>{e(ue),o(()=>e(ue)?.imageUrl)?I(ot):I(u,!1)})}var p=d(st,2),x=s(p);$(I=>{et=Pe(Ne,1,"dropdown-item svelte-gkl5a1",null,et,I),_(x,(e(ue),o(()=>e(ue).label)))},[()=>({selected:f()===e(ue).value})]),Ze("click",Ne,()=>Z(e(ue))),D(Qe,Ne)}),D(fe,Ce)},He=fe=>{var Ce=lt(),Ye=Be(Ce);{var Qe=ue=>{var Ne=Ia(),et=s(Ne);$(()=>_(et,`No se encontraron resultados para "${e(A)??""}"`)),D(ue,Ne)};oe(Ye,ue=>{e(A)&&ue(Qe)},!0)}D(fe,Ce)};oe(Xe,fe=>{e(l),o(()=>e(l).length>0)?fe(it):fe(He,!1)})}$((fe,Ce,Ye)=>{ke(De,"placeholder",fe),ke(Le,"id",`dropdown-options-${c()??""}`),qe=Pe(Ie,1,"dropdown-item svelte-gkl5a1",null,qe,Ce),_($e,Ye)},[()=>(n(),o(()=>n()("common.search")||"Search...")),()=>({selected:f()===""}),()=>(M(g()),n(),o(()=>g()||n()("common.select_option")))]),_a(De,()=>e(A),fe=>b(A,fe)),Ze("input",De,ie),Ze("keydown",De,F),Ze("click",Ie,()=>Z({value:"",label:g(),imageUrl:""})),D(C,he)};oe(le,C=>{e(R)&&C(Re)})}Nt(G,C=>b(J,C),()=>e(J)),$((C,he)=>{ke(G,"id",c()),be=Pe(K,1,"dropdown-button svelte-gkl5a1",null,be,C),K.disabled=v(),ke(K,"aria-expanded",e(R)),ke(K,"aria-controls",`dropdown-options-${c()??""}`),Ee=Pe(xe,1,"dropdown-arrow svelte-gkl5a1",null,Ee,he)},[()=>({disabled:v(),open:e(R)}),()=>({rotated:e(R)})]),Ze("click",K,X),D(j,G),pt(),h()}function Rt(j,t){if(t()){const i=`/data-center/fighter-details?fighter=${encodeURIComponent(t().nameWithNickname)}`;Bt(i)}}var Aa=E('<img class="fighter-image svelte-1gw86rr"/> <div class="fighter-placeholder svelte-1gw86rr" style="display: none;">Picture Unavailable</div>',1),Pa=E('<div class="fighter-placeholder svelte-1gw86rr">Picture Unavailable</div>'),La=(j,t)=>j.key==="Enter"&&t(),Ha=E('<div class="stat-item role-disc-clickable svelte-1gw86rr" role="button" tabindex="0"><span class="stat-label svelte-1gw86rr">ROLE-DISC:</span> <span><div class="role-emojis svelte-1gw86rr"> </div> <div class="role-name svelte-1gw86rr"> </div></span></div>'),Wa=E('<hr class="archetype-divider svelte-1gw86rr"/> <div class="archetype-container svelte-1gw86rr"><div class="archetype-section svelte-1gw86rr"><h3 class="archetype-section-title svelte-1gw86rr"> </h3> <div class="archetype-fields svelte-1gw86rr"><div class="archetype-field svelte-1gw86rr"><div class="archetype-field-header svelte-1gw86rr"><span class="archetype-icon svelte-1gw86rr"><!></span> <div class="archetype-field-label svelte-1gw86rr"> </div></div> <div class="archetype-field-value description svelte-1gw86rr"> </div></div> <div class="archetype-field svelte-1gw86rr"><div class="archetype-field-header svelte-1gw86rr"><span class="archetype-icon svelte-1gw86rr"><!></span> <div class="archetype-field-label svelte-1gw86rr"> </div></div> <div class="archetype-field-value favorite-zone svelte-1gw86rr"> </div></div> <div class="archetype-field svelte-1gw86rr"><div class="archetype-field-header svelte-1gw86rr"><span class="archetype-icon svelte-1gw86rr"><!></span> <div class="archetype-field-label svelte-1gw86rr"> </div></div> <div class="archetype-field-value strengths svelte-1gw86rr"> </div></div> <div class="archetype-field svelte-1gw86rr"><div class="archetype-field-header svelte-1gw86rr"><span class="archetype-icon svelte-1gw86rr"><!></span> <div class="archetype-field-label svelte-1gw86rr"> </div></div> <div class="archetype-field-value weaknesses svelte-1gw86rr"> </div></div></div></div></div>',1),Ua=E('<div class="fighter-header svelte-1gw86rr"><div class="header-actions svelte-1gw86rr"><!> <button type="button" class="fighter-detail-cta svelte-1gw86rr" title="View detailed fighter profile"><!></button></div> <button type="button" class="fighter-link svelte-1gw86rr"><div class="fighter-image-container svelte-1gw86rr"><!></div></button></div> <button type="button" class="fighter-name-link svelte-1gw86rr"><div class="fighter-name svelte-1gw86rr"> </div></button> <div class="star-rating svelte-1gw86rr"><div class="stars-container svelte-1gw86rr"></div></div> <div class="fighter-stats svelte-1gw86rr"><!> <div class="stat-item svelte-1gw86rr"><span class="stat-label svelte-1gw86rr"> </span> <span class="stat-value career-record svelte-1gw86rr"> </span></div> <div class="stat-item svelte-1gw86rr"><span class="stat-label svelte-1gw86rr"> </span> <span class="stat-value record svelte-1gw86rr"> </span></div> <div class="stat-item svelte-1gw86rr"><span class="stat-label svelte-1gw86rr"> </span> <span><!></span></div> <div class="stat-item svelte-1gw86rr"><span class="stat-label svelte-1gw86rr"> </span> <span class="stat-value height svelte-1gw86rr"> </span></div> <div class="stat-item svelte-1gw86rr"><span class="stat-label svelte-1gw86rr"> </span> <span class="stat-value reach svelte-1gw86rr"> </span></div></div> <!>',1),Va=E('<div class="empty-card svelte-1gw86rr"><div class="empty-message svelte-1gw86rr"> </div></div>'),Ga=E('<div class="fighter-card svelte-1gw86rr"><!></div> <!>',1);function Ut(j,t){gt(t,!1);const[i,h]=mt(),n=()=>vt(ft,"$_",i),a=T(),l=T(),c=T(),g=T();let v=Je(t,"fighter",8,null),m=Je(t,"id",8,""),f=T(!1);function y(){b(f,!0)}function R(){b(f,!1)}L(()=>n(),()=>{b(a,F=>{if(!F||!F.startsWith("@ARCHETYPE_"))return F;let k="",S="";if(F.includes("_DESCRIPTION"))k=F.replace("@ARCHETYPE_","").replace("_DESCRIPTION",""),S="description";else if(F.includes("_FAVORITE_ZONE"))k=F.replace("@ARCHETYPE_","").replace("_FAVORITE_ZONE",""),S="favorite_zone";else if(F.includes("_STRENGTHS"))k=F.replace("@ARCHETYPE_","").replace("_STRENGTHS",""),S="strengths";else if(F.includes("_WEAKNESSES"))k=F.replace("@ARCHETYPE_","").replace("_WEAKNESSES",""),S="weaknesses";else{const be=F.match(/@ARCHETYPE_(.+)_([^_]+)$/);if(!be)return F;k=be[1],S=be[2].toLowerCase()}const G=`archetype_data.${k}.${S}`,K=n()(G);return F.includes("_WEAKNESSES"),K!==G?K:F})}),L(()=>(M(v()),$t),()=>{b(l,v()?$t(v().archetype):null)}),L(()=>M(v()),()=>{b(c,v()?.rawData.height_inches?Math.floor(v().rawData.height_inches/12)+"'"+v().rawData.height_inches%12+'"':"-")}),L(()=>M(v()),()=>{b(g,v()?.rawData.reach_inches?v().rawData.reach_inches+'"':"-")}),wt(),ut();var J=Ga(),ae=Be(J),A=s(ae);{var X=F=>{var k=Ua(),S=Be(k),G=s(S),K=s(G);xa(K,{get fighterFullName(){return M(v()),o(()=>v().nameWithNickname)},size:"large"});var be=d(K,2);be.__click=[Rt,v];var O=s(be);ha(O,{size:16});var U=d(G,2);U.__click=[Rt,v];var ve=s(U),z=s(ve);{var xe=B=>{var re=Aa(),Se=Be(re);$(()=>{ke(Se,"src",(M(v()),o(()=>v().pictureUrl))),ke(Se,"alt",`${M(v()),o(()=>v().name)??""} fighter profile picture`)}),Ze("error",Se,Me=>{Me.currentTarget.style.display="none";const P=Me.currentTarget.nextElementSibling;P&&(P.style.display="block")}),D(B,re)},Ee=B=>{var re=Pa();D(B,re)};oe(z,B=>{M(v()),o(()=>v().pictureUrl)?B(xe):B(Ee,!1)})}var le=d(S,2);le.__click=[Rt,v];var Re=s(le),C=s(Re),he=d(le,2),Te=s(he),De=d(he,2),Le=s(De);{var Ie=B=>{var re=Ha();re.__click=y,re.__keydown=[La,y];var Se=s(re),Me=d(Se,2),P=s(Me),r=s(P),w=d(P,2),N=s(w);$((Q,W)=>{ke(re,"aria-label",Q),ke(Se,"title",W),Pe(Me,1,`stat-value role-indicator archetype-dots archetype-${e(l),o(()=>e(l).type)??""}`,"svelte-1gw86rr"),ke(Me,"title",(e(l),o(()=>e(l).tooltip))),_(r,(e(l),o(()=>e(l).label))),_(N,(e(l),o(()=>e(l).name)))},[()=>(n(),o(()=>n()("role_disc_modal.open_modal_aria_label"))),()=>(n(),o(()=>n()("role_disc_modal.archetype_tooltip")))]),D(B,re)};oe(Le,B=>{e(l)&&B(Ie)})}var qe=d(Le,2),q=s(qe),$e=s(q),Xe=d(q,2),it=s(Xe),He=d(qe,2),fe=s(He),Ce=s(fe),Ye=d(fe,2),Qe=s(Ye),ue=d(He,2),Ne=s(ue),et=s(Ne),st=d(Ne,2);let ot;var u=s(st);{var p=B=>{var re=ht();$(()=>_(re,`+${M(v()),o(()=>v().streak)??""}W`)),D(B,re)},x=B=>{var re=lt(),Se=Be(re);{var Me=r=>{var w=ht();$(()=>_(w,`${M(v()),o(()=>v().streak)??""}L`)),D(r,w)},P=r=>{var w=ht("-");D(r,w)};oe(Se,r=>{M(v()),o(()=>v().streak<0)?r(Me):r(P,!1)},!0)}D(B,re)};oe(u,B=>{M(v()),o(()=>v().streak>0)?B(p):B(x,!1)})}var I=d(ue,2),Y=s(I),se=s(Y),we=d(Y,2),de=s(we),Ke=d(I,2),Oe=s(Ke),We=s(Oe),Ue=d(Oe,2),tt=s(Ue),rt=d(De,2);{var nt=B=>{var re=Wa(),Se=d(Be(re),2),Me=s(Se),P=s(Me),r=s(P),w=d(P,2),N=s(w),Q=s(N),W=s(Q),H=s(W);ga(H,{size:18});var V=d(W,2),ce=s(V),pe=d(Q,2),me=s(pe),ge=d(N,2),te=s(ge),ne=s(te),Fe=s(ne);Gt(Fe,{size:18});var _e=d(ne,2),ee=s(_e),Ae=d(te,2),je=s(Ae),Ve=d(ge,2),at=s(Ve),dt=s(at),Dt=s(dt);zt(Dt,{size:18});var qt=d(dt,2),Yt=s(qt),jt=d(at,2),Qt=s(jt),Zt=d(Ve,2),Kt=s(Zt),Ct=s(Kt),Jt=s(Ct);Tt(Jt,{size:18});var Xt=d(Ct,2),ea=s(Xt),ta=d(Kt,2),aa=s(ta);$((ia,sa,ra,na,oa,la,da,va,ca)=>{_(r,ia),_(ce,sa),_(me,ra),_(ee,na),_(je,oa),_(Yt,la),_(Qt,da),_(ea,va),_(aa,ca)},[()=>(n(),o(()=>n()("archetype.analysis_title"))),()=>(n(),o(()=>n()("archetype.tactical_description"))),()=>(e(a),M(v()),o(()=>e(a)(v().archetype.description))),()=>(n(),o(()=>n()("archetype.preferred_zone"))),()=>(e(a),M(v()),o(()=>e(a)(v().archetype.favoriteZone))),()=>(n(),o(()=>n()("archetype.strengths"))),()=>(e(a),M(v()),o(()=>e(a)(v().archetype.strengths))),()=>(n(),o(()=>n()("archetype.weaknesses"))),()=>(e(a),M(v()),o(()=>e(a)(v().archetype.weaknesses)))]),D(B,re)};oe(rt,B=>{M(v()),o(()=>v().archetype)&&B(nt)})}$((B,re,Se,Me,P,r,w,N,Q,W,H)=>{ke(be,"aria-label",`View detailed fighter profile for ${M(v()),o(()=>v().nameWithNickname)??""}`),_(C,(M(v()),o(()=>v().name))),xt(Te,`--fill-width: ${M(v()),o(()=>v().stars*20)??""}%`),ke(q,"title",B),_($e,`${re??""}:`),_(it,(M(v()),o(()=>v().career_record))),ke(fe,"title",Se),_(Ce,`${Me??""}:`),_(Qe,(M(v()),o(()=>v().record_36m))),ke(Ne,"title",P),_(et,`${r??""}:`),ot=Pe(st,1,"stat-value streak svelte-1gw86rr",null,ot,w),ke(Y,"title",N),_(se,`${Q??""}:`),_(de,e(c)),ke(Oe,"title",W),_(We,`${H??""}:`),_(tt,e(g))},[()=>(n(),o(()=>n()("fighter_profile.career_record_tooltip")||"Complete career record of the fighter")),()=>(n(),o(()=>n()("fighter_profile.career_record"))),()=>(n(),o(()=>n()("fighter_profile.record_36m_tooltip")||"Record from the last 36 months")),()=>(n(),o(()=>n()("fighter_profile.record_36m"))),()=>(n(),o(()=>n()("fighter_profile.streak_tooltip")||"Current winning or losing streak")),()=>(n(),o(()=>n()("fighter_profile.streak"))),()=>({"streak-win":v().streak>0,"streak-loss":v().streak<0}),()=>(n(),o(()=>n()("fighter_profile.height_tooltip")||"Fighter height in feet and inches")),()=>(n(),o(()=>n()("fighter_profile.height"))),()=>(n(),o(()=>n()("fighter_profile.reach_tooltip")||"Fighter arm reach in inches")),()=>(n(),o(()=>n()("fighter_profile.reach")))]),D(F,k)},Z=F=>{var k=Va(),S=s(k),G=s(S);$(K=>_(G,K),[()=>(n(),o(()=>n()("fight_radar.select_fighter_stats")))]),D(F,k)};oe(A,F=>{v()?F(X):F(Z,!1)})}var ie=d(ae,2);Ra(ie,{get isOpen(){return e(f)},$$events:{close:R}}),$(()=>ke(ae,"id",m())),D(j,J),pt(),h()}ua(["click","keydown"]);var za=E('<div class="calendar-banner svelte-12pg6ne"><div class="banner-content svelte-12pg6ne"><div class="banner-text svelte-12pg6ne"><h2 class="svelte-12pg6ne"><!> </h2> <p class="svelte-12pg6ne"> </p></div> <button class="banner-button svelte-12pg6ne"> </button></div></div>');function Ba(j,t){gt(t,!1);const[i,h]=mt(),n=()=>vt(ft,"$_",i);function a(){Bt("/calendar")}ut();var l=za(),c=s(l),g=s(c),v=s(g),m=s(v);pa(m,{size:24,style:"display: inline; margin-right: 0.5rem;"});var f=d(m),y=d(v,2),R=s(y),J=d(g,2),ae=s(J);$((A,X,Z)=>{_(f,` ${A??""}`),_(R,X),_(ae,Z)},[()=>n()("banner.new_functionality"),()=>n()("banner.explore_calendar"),()=>n()("banner.view_calendar")]),Ze("click",J,a),D(j,l),pt(),h()}var ye=(j=>(j.FIGHT_WINNER="fight_winner",j.METHOD_OF_VICTORY="method_of_victory",j.WINNER_AND_ROUND="winner_and_round",j.TOTAL_ROUNDS="total_rounds",j.SPECIFIC_FINISH_METHOD="specific_finish_method",j.GOES_TO_DECISION="goes_to_decision",j.DISTANCE_YES_NO="distance_yes_no",j.GONE_IN_60="gone_in_60",j.FIGHT_PROPS="fight_props",j.KEY_FACTORS="key_factors",j.TRENDS="trends",j.NO_PREDICTION="no_prediction",j))(ye||{}),bt=(j=>(j.HIGH="high",j.MEDIUM="medium",j.LOW="low",j))(bt||{});class qa{constructor(){this.MIN_HIGH_CONFIDENCE=75,this.MIN_MEDIUM_CONFIDENCE=60,this.MIN_LOW_CONFIDENCE=50}generateBetCards(t,i){const h=[],n=this.calculateWinProbability(t,i),a=this.predictMethodOfVictory(t,i,n),l=this.predictTotalRounds(t,i,n),c=this.predictRoundBetting(t,i,n),g=this.generateFightProps(t,i,n),v=this.analyzeKeyFactors(t,i),m=this.analyzeTrends(t,i);return h.push(this.createMoneylineCard(n)),a.probability>=this.MIN_MEDIUM_CONFIDENCE&&h.push(this.createMethodOfVictoryCard(a)),l.forEach(f=>{f.probability>=this.MIN_MEDIUM_CONFIDENCE&&h.push(this.createTotalRoundsCard(f))}),c.probability>=this.MIN_HIGH_CONFIDENCE&&h.push(this.createRoundBettingCard(c)),h.push(this.createFightPropsCard(g)),h.push(this.createKeyFactorsCard(v)),h.push(this.createTrendsCard(m)),this.hasHighConfidencePredictions(h)||h.push(this.createNoPredictionCard()),this.sortBetCardsByPriority(h)}validatePredictions(t){const i=this.filterByConfidence(t);return this.resolveContradictions(i)}filterByConfidence(t){return t.filter(i=>i.type==="key_factors"||i.type==="trends"||i.type==="no_prediction"||i.type==="fight_winner"?!0:i.confidence>=this.MIN_MEDIUM_CONFIDENCE)}resolveContradictions(t){let i=[...t];return i=this.resolveOverUnderContradictions(i),i=this.resolveMethodVsDurationContradictions(i),i=this.resolveMethodVsPropsContradictions(i),i=this.resolveDurationVsPropsContradictions(i),i}resolveMethodVsDurationContradictions(t){const i=t.find(m=>m.type==="method_of_victory"&&(m.prediction.toLowerCase().includes("decision")||m.predictionKey?.toLowerCase().includes("decision")));if(!i)return t;const h=t.filter(m=>{if(m.type!=="total_rounds")return!1;const f=m.prediction.toLowerCase(),y=m.predictionKey?.toLowerCase()||"";return f.includes("under")||y.includes("under")}),n=t.filter(m=>{if(m.type!=="winner_and_round")return!1;const f=m.prediction.toLowerCase(),y=m.predictionKey?.toLowerCase()||"";return f.includes("round 1")||f.includes("round 2")||y.includes("round_1")||y.includes("round_2")}),a=[...h,...n];if(a.length===0)return t;const l=[i,...a],c=Math.max(...l.map(m=>m.confidence)),g=l.find(m=>m.confidence===c);if(!g)return t;const v=new Set(l.map(m=>m.id));return t.filter(m=>!v.has(m.id)||m.id===g.id)}resolveOverUnderContradictions(t){const i=t.filter(a=>a.type==="total_rounds");if(i.length<=1)return t;const h=new Map;for(const a of i){const l=a.prediction.toLowerCase(),c=a.predictionKey?.toLowerCase()||"",g=l.match(/(\d+\.5)/)||c.match(/(\d+)_5/);if(g){const v=g[1].replace("_5",".5");h.has(v)||h.set(v,[]),h.get(v).push(a)}}const n=new Set;for(const[a,l]of h)if(l.length>1){const c=l.some(v=>v.prediction.toLowerCase().includes("over")||v.predictionKey?.toLowerCase().includes("over")),g=l.some(v=>v.prediction.toLowerCase().includes("under")||v.predictionKey?.toLowerCase().includes("under"));if(c&&g){const m=l.sort((f,y)=>y.confidence-f.confidence)[0];for(const f of l)f.id!==m.id&&n.add(f.id)}}return t.filter(a=>!n.has(a.id))}resolveMethodVsPropsContradictions(t){const i=t.find(l=>l.type==="method_of_victory"),h=t.filter(l=>l.type==="fight_props");if(!i||h.length===0)return t;const n=i.prediction.toLowerCase(),a=new Set;for(const l of h){const c=(l.prediction||"").toLowerCase(),g=(l.predictionKey||"").toLowerCase();(n.includes("ko")||n.includes("tko"))&&(c.includes("submission")||c.includes("ground control")||g.includes("submission")||g.includes("ground_control"))&&a.add(l.id),n.includes("submission")&&(c.includes("standing exchange")&&!c.includes("ground")||g.includes("standing_exchange")&&!g.includes("ground"))&&a.add(l.id),n.includes("decision")&&(c.includes("first round finish")||c.includes("gone in 60")||g.includes("first_round_finish")||g.includes("gone_in_60"))&&a.add(l.id)}return t.filter(l=>!a.has(l.id))}resolveDurationVsPropsContradictions(t){const i=t.filter(a=>a.type==="total_rounds"),h=t.filter(a=>a.type==="fight_props");if(i.length===0||h.length===0)return t;const n=new Set;for(const a of i){const l=(a.prediction||"").toLowerCase(),c=(a.predictionKey||"").toLowerCase(),g=l.includes("under 2.5")||c.includes("under_2_5"),v=l.includes("over 3.5")||c.includes("over_3_5");for(const m of h){const f=(m.prediction||"").toLowerCase(),y=(m.predictionKey||"").toLowerCase();g&&((f.includes("over 100 strikes")||y.includes("over_100_strikes"))&&n.add(m.id),(f.includes("goes to distance")||y.includes("goes_to_distance"))&&n.add(m.id)),v&&(f.includes("first round")||f.includes("gone in 60")||y.includes("first_round")||y.includes("gone_in_60"))&&n.add(m.id)}}return t.filter(a=>!n.has(a.id))}calculatePhysicalAdvantage(t,i){const h=(t.rawData.reach_inches||0)-(i.rawData.reach_inches||0),n=(t.rawData.height_inches||0)-(i.rawData.height_inches||0);let a=0,l=0;return h>=3?a+=Math.min(Math.abs(h)*.004,.025):h<=-3&&(l+=Math.min(Math.abs(h)*.004,.025)),n>=3?a+=Math.min(Math.abs(n)*.0025,.015):n<=-3&&(l+=Math.min(Math.abs(n)*.0025,.015)),{f1Advantage:a,f2Advantage:l}}calculateWinProbability(t,i){let a=t.overall+(t.oppTierScore-1.82)*7.5,l=i.overall+(i.oppTierScore-1.82)*7.5;const c=this.calculatePhysicalAdvantage(t,i);a*=1+c.f1Advantage,l*=1+c.f2Advantage,a*=this.calculateAgeImpact(t),l*=this.calculateAgeImpact(i);const g=this.getInactiveMonths(t),v=this.getInactiveMonths(i);if(g>=18){const z=Math.min((g-18)*.005,.25);a*=1-z}if(v>=18){const z=Math.min((v-18)*.005,.25);l*=1-z}const m=this.getFightsInPeriod(t,18),f=this.getFightsInPeriod(i,18);m>=3&&(a*=1.05),f>=3&&(l*=1.05);const y=t.rawData.Number_of_Fights_36m>0?t.rawData.win/t.rawData.Number_of_Fights_36m*100:0,R=i.rawData.Number_of_Fights_36m>0?i.rawData.win/i.rawData.Number_of_Fights_36m*100:0,J=this.calculateMomentum(t),ae=this.calculateMomentum(i);a*=1+J,l*=1+ae;let A=.32,X=.32;y>=77?A=.38:y<50&&(A=.28),R>=77?X=.38:R<50&&(X=.28);const Z=a+y*A,ie=l+R*X,F=this.calculateAge(t),k=this.calculateAge(i),S=F-k;let G=Z,K=ie;if(Math.abs(S)>=5){const z=Math.min(Math.abs(S)*.005,.03);S>0?(G=Z*(1-z),K=ie*(1+z)):(G=Z*(1+z),K=ie*(1-z))}const be=Math.abs(G-K);if(be>11){const z=1+(be-11)*.018;G>K?G*=z:K*=z}const O=G+K;let U=O>0?Math.round(G/O*100):50,ve=O>0?Math.round(K/O*100):50;if(U=Math.max(15,Math.min(88,U)),ve=100-U,U>ve){let z=this.getWinReasoningKey(t,i,y,R);return{winner:t,probability:U,reasoning:z,adjustedScore1:G,adjustedScore2:K}}else{let z=this.getWinReasoningKey(i,t,R,y);return{winner:i,probability:ve,reasoning:z,adjustedScore1:K,adjustedScore2:G}}}predictMethodOfVictory(t,i,h){const n=h.winner,a=n===t?i:t,l=1.82,c=4.5,g=n.overall+(n.oppTierScore-l)*c,v=a.overall+(a.oppTierScore-l)*c,m=Math.abs(g-v),f=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko+t.rawData.win_sub)/t.rawData.Number_of_Fights_36m*100:0,y=i.rawData.Number_of_Fights_36m>0?(i.rawData.win_ko+i.rawData.win_tko+i.rawData.win_sub)/i.rawData.Number_of_Fights_36m*100:0,R=n===t?f:y,J=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko)/t.rawData.Number_of_Fights_36m*100:0,ae=i.rawData.Number_of_Fights_36m>0?(i.rawData.win_ko+i.rawData.win_tko)/i.rawData.Number_of_Fights_36m*100:0,A=n===t?J:ae,X=t.rawData.Number_of_Fights_36m>0?t.rawData.win_sub/t.rawData.Number_of_Fights_36m*100:0,Z=i.rawData.Number_of_Fights_36m>0?i.rawData.win_sub/i.rawData.Number_of_Fights_36m*100:0,ie=n===t?X:Z,F=a.rawData.Number_of_Fights_36m>0?(a.rawData.loss_ko+a.rawData.loss_tko)/a.rawData.Number_of_Fights_36m*100:0,k=a.rawData.Number_of_Fights_36m>0?a.rawData.loss_sub/a.rawData.Number_of_Fights_36m*100:0,S=F+k,G=S;let K=m*.16+R*.4+S*.44;const be=A>ie&&F>k,O=ie>A&&k>F;(be||O)&&(K+=7),n.rawData.Number_of_Fights_36m>=4&&R>=40&&R<=65&&(K+=3);const ve=n.archetype?.combinedRole||"",z=a.archetype?.combinedRole||"",xe=ve.includes("AT")||ve.includes("ANT"),Ee=z.includes("PT")||z.includes("PNT");if(xe&&Ee&&R>30&&S>25&&(K+=3),!(K>=32&&K<36&&S>50)){if(K<36||h.probability<58&&R<24){let q=Math.min(Math.round(100-K),85);return R<15&&G<20&&(q+=3),R<10&&G<15&&(q+=3),{method:"Decision",methodKey:"combat_analysis.finish_methods.decision",probability:Math.min(q,88),reasoning:"combat_analysis.reasoning.both_tend_long_fights",finishRate1:f,finishRate2:y}}}let le=A*.56+F*.44,Re=ie*.59+k*.41;const C=k-F;C>12?Re+=10:C>6&&(Re+=5);const he=F-k;he>12?le+=10:he>6&&(le+=5);const Te=A>ie&&F>k,De=ie>A&&k>F,Le=Math.abs(le-Re),Ie=Math.abs(A-ie);if(Le<3?Ie<5?F>k:Te&&!De||le>Re&&!De:le>Re){let q=Math.min(Math.round(K+le*.35),81);return m>10&&(q+=7),F>30&&(q+=7),A>50&&(q+=5),A>60&&F>25&&(q+=3),Te&&A>18&&F>15&&(q+=8),{method:"KO/TKO",methodKey:"combat_analysis.finish_methods.ko_tko",probability:Math.min(q,89),reasoning:"combat_analysis.reasoning.both_knockout_history",finishRate1:f,finishRate2:y}}else{let q=Math.min(Math.round(K+Re*.35),76);return m>10&&(q+=7),k>24&&(q+=7),ie>40&&(q+=5),ie>50&&k>20&&(q+=3),De&&ie>16&&k>12&&(q+=8),{method:"Submission",methodKey:"combat_analysis.finish_methods.submission",probability:Math.min(q,89),reasoning:"combat_analysis.reasoning.high_submission_probability",finishRate1:f,finishRate2:y}}}predictTotalRounds(t,i,h){const n=h.winner,a=n===t?i:t,l=1.82,c=3.45,g=n.overall+(n.oppTierScore-l)*c,v=a.overall+(a.oppTierScore-l)*c,m=Math.abs(g-v),f=(t.rawData.Fight_Duration_Seconds||900)/60,y=(i.rawData.Fight_Duration_Seconds||900)/60,R=n===t?f:y,J=n===t?y:f,ae=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko+t.rawData.win_sub)/t.rawData.Number_of_Fights_36m*100:0,A=i.rawData.Number_of_Fights_36m>0?(i.rawData.win_ko+i.rawData.win_tko+i.rawData.win_sub)/i.rawData.Number_of_Fights_36m*100:0,X=n===t?ae:A,Z=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko)/t.rawData.Number_of_Fights_36m*100:0,ie=i.rawData.Number_of_Fights_36m>0?(i.rawData.win_ko+i.rawData.win_tko)/i.rawData.Number_of_Fights_36m*100:0,F=n===t?Z:ie,k=a.rawData.Number_of_Fights_36m>0?(a.rawData.loss_ko+a.rawData.loss_tko+a.rawData.loss_sub)/a.rawData.Number_of_Fights_36m*100:0;let S=m*.21+X*.34+k*.3+(15-Math.min(R,15))*.15*10;k>45&&(S+=5),ae<25&&A<25&&(S-=6);const G=t.rawData.Number_of_Fights_36m,K=i.rawData.Number_of_Fights_36m;Math.abs(G-K)>=4&&Math.min(G,K)<=2&&(S-=3);const O=[],U=(f+y)/2,ve=X>70&&k>50&&m>12||X>80&&k>40||m>15&&X>60;if(S>55&&h.probability>65&&ve||R<6&&J<8&&m>10){let le=Math.min(Math.round(S+10),75);m>15&&(le+=10),X>80&&(le+=8),k>60&&(le+=8);const Re=Math.min(le,82);Re>=60&&O.push({prediction:"UNDER 1.5 rounds",predictionKey:"combat_analysis.duration_predictions.under_1_5_rounds",probability:Re,reasoning:"combat_analysis.reasoning.extreme_early_finish",explanationKey:"combat_analysis.bet_explanations.under_1_5_rounds",avgTime:R})}const z=X>60&&k>40||F>60&&R<8;if(S>37&&h.probability>48||z){let le=Math.min(Math.round(S+19),76);m>10&&(le+=7),k>45&&(le+=7),X>65&&(le+=7),X>50&&k>35&&(le+=4);const Re=Math.min(le,87);Re>=60&&O.push({prediction:"UNDER 2.5 rounds",predictionKey:"combat_analysis.duration_predictions.under_2_5_rounds",probability:Re,reasoning:"combat_analysis.reasoning.short_fight_history",explanationKey:"combat_analysis.bet_explanations.under_2_5_rounds",avgTime:R})}let xe=68;S>38&&(xe=61),S>32&&S<=38&&(xe=66),S<25&&(xe=75),S<18&&(xe=79),X>60&&(xe-=4),X<20&&(xe+=7),X<15&&k<25&&(xe+=5);const Ee=Math.min(Math.max(Math.round(xe),53),82);return Ee>=60&&O.push({prediction:"OVER 2.5 rounds",predictionKey:"combat_analysis.duration_predictions.over_2_5_rounds",probability:Ee,reasoning:"combat_analysis.reasoning.expected_average_duration",explanationKey:"combat_analysis.bet_explanations.over_2_5_rounds",avgTime:U}),O.length===0&&O.push({prediction:"OVER 2.5 rounds",predictionKey:"combat_analysis.duration_predictions.over_2_5_rounds",probability:Ee,reasoning:"combat_analysis.reasoning.expected_average_duration",explanationKey:"combat_analysis.bet_explanations.over_2_5_rounds",avgTime:U}),O}generateFightProps(t,i,h){const n=this.calculateBettingMetrics(t,i,h);return this.hasDominantGrappler(t,i),this.isStrikerWar(t,i),n.f1SubRate+n.f2SubRate>1.5?{prop:"OVER 1.5 submission attempts",propKey:"combat_analysis.special_bets.over_1_5_submissions",value:"HIGH",valueKey:"combat_analysis.bet_values.high",reasoning:"combat_analysis.reasoning.both_seek_submissions",explanationKey:"combat_analysis.bet_explanations.over_1_5_submissions",metrics:n}:n.weightedFinishRate&&n.weightedFinishRate>60&&n.weightedAvgFightTime&&n.weightedAvgFightTime<6?{prop:"First round finish",propKey:"combat_analysis.special_bets.first_round_finish",value:"MEDIUM-HIGH",valueKey:"combat_analysis.bet_values.medium_high",reasoning:"combat_analysis.reasoning.at_least_one_finishes_fast",explanationKey:"combat_analysis.bet_explanations.first_round_finish",metrics:n}:n.f1KnockdownRate>.6&&n.f2KnockdownRate>.6?{prop:"Double knockdown",propKey:"combat_analysis.special_bets.double_knockdown",value:"MEDIUM",valueKey:"combat_analysis.bet_values.medium",reasoning:"combat_analysis.reasoning.both_knockdown_history",explanationKey:"combat_analysis.bet_explanations.double_knockdown",metrics:n}:n.f1TakedownRate>15||n.f2TakedownRate>15?{prop:"Ground control +2 minutes",propKey:"combat_analysis.special_bets.ground_control_2min",value:"HIGH",valueKey:"combat_analysis.bet_values.high",reasoning:"combat_analysis.reasoning.technical_fighters_takedowns",explanationKey:"combat_analysis.bet_explanations.ground_control_2min",metrics:n}:n.f1StrikeVolume>120&&n.f2StrikeVolume>120?{prop:"OVER 100 strikes per fighter",propKey:"combat_analysis.special_bets.over_100_strikes_each",value:"HIGH",valueKey:"combat_analysis.bet_values.high",reasoning:"combat_analysis.reasoning.both_high_volume",explanationKey:"combat_analysis.bet_explanations.over_100_strikes_each",metrics:n}:n.f1TakedownRate<5&&n.f2TakedownRate<5?{prop:"Standing exchange +80%",propKey:"combat_analysis.special_bets.standing_exchange_80",value:"HIGH",valueKey:"combat_analysis.bet_values.high",reasoning:"combat_analysis.reasoning.both_prefer_standing",explanationKey:"combat_analysis.bet_explanations.standing_exchange_80",metrics:n}:{prop:"Fight goes to distance",propKey:"combat_analysis.special_bets.goes_to_distance",value:"MEDIUM",valueKey:"combat_analysis.bet_values.medium",reasoning:"combat_analysis.reasoning.compatible_styles_technical",explanationKey:"combat_analysis.bet_explanations.goes_to_distance",metrics:n}}predictRoundBetting(t,i,h){const n=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko+t.rawData.win_sub)/t.rawData.Number_of_Fights_36m*100:0,a=i.rawData.Number_of_Fights_36m>0?(i.rawData.win_ko+i.rawData.win_tko+i.rawData.win_sub)/i.rawData.Number_of_Fights_36m*100:0,l=(t.rawData.Fight_Duration_Seconds||900)/60,c=(i.rawData.Fight_Duration_Seconds||900)/60,g=this.getWeightedMetric(n,a,h,t,.5),v=this.getWeightedMetric(l,c,h,t,1);return g>60&&v<5?{prediction:"Round 1",predictionKey:"betting_markets.round_1",probability:Math.round(Math.min(g+15,85)),reasoning:"betting_markets.reasoning.early_explosive_finish",explanationKey:"betting_markets.explanations.round_1_finish",avgTime:v}:g>40&&v<8?{prediction:"Round 2",predictionKey:"betting_markets.round_2",probability:Math.round(Math.min(g+10,80)),reasoning:"betting_markets.reasoning.second_round_finish",explanationKey:"betting_markets.explanations.round_2_finish",avgTime:v}:{prediction:"Goes to Decision",predictionKey:"betting_markets.goes_to_decision",probability:Math.round(Math.max(100-g,20)),reasoning:"betting_markets.reasoning.likely_decision",explanationKey:"betting_markets.explanations.goes_to_decision",avgTime:v}}analyzeKeyFactors(t,i){const h=[],n=t.rawData.reach_inches||0,a=i.rawData.reach_inches||0,l=Math.abs(n-a);if(l>2){const R=n>a?t.name||"Fighter 1":i.name||"Fighter 2";h.push({label:"combat_analysis.key_factors.reach_advantage",value:`${R} +${l}"`,type:"advantage"})}const c=t.rawData.Sig_Strikes_Thrown>0?Math.round(t.rawData.Sig_Strikes_Landed/t.rawData.Sig_Strikes_Thrown*100):0,g=i.rawData.Sig_Strikes_Thrown>0?Math.round(i.rawData.Sig_Strikes_Landed/i.rawData.Sig_Strikes_Thrown*100):0;h.push({label:"combat_analysis.key_factors.strike_accuracy",value:`${t.name||"F1"}: ${c}% vs ${i.name||"F2"}: ${g}%`,type:"comparison"});const v=t.rawData.takedowns_attempted_against>0?Math.round(t.rawData.Takedowns_Defended/t.rawData.takedowns_attempted_against*100):85,m=i.rawData.takedowns_attempted_against>0?Math.round(i.rawData.Takedowns_Defended/i.rawData.takedowns_attempted_against*100):85;h.push({label:"combat_analysis.key_factors.takedown_defense",value:`${t.name||"F1"}: ${v}% vs ${i.name||"F2"}: ${m}%`,type:"comparison"});const f=t.rawData.Number_of_Fights_36m||0,y=i.rawData.Number_of_Fights_36m||0;if(Math.abs(f-y)>2){const R=f>y?t.name||"Fighter 1":i.name||"Fighter 2",J=Math.max(f,y),ae=Math.min(f,y);h.push({label:"combat_analysis.key_factors.higher_activity",value:`${R}: ${J} vs ${ae} fights`,type:"advantage"})}return h}analyzeTrends(t,i){const h=[],n=t.rawData.Number_of_Fights_36m>0?Math.round(t.rawData.win/t.rawData.Number_of_Fights_36m*100):0,a=i.rawData.Number_of_Fights_36m>0?Math.round(i.rawData.win/i.rawData.Number_of_Fights_36m*100):0;n>=75?h.push({type:"positive",text:`${t.name||"Fighter 1"} has ${n}% win rate`,textKey:"combat_analysis.trends.high_win_rate",params:{name:t.name||"Fighter 1",winRate:n},fighter:t.name}):n<50&&h.push({type:"negative",text:`${t.name||"Fighter 1"} struggling at ${n}% win rate`,textKey:"combat_analysis.trends.struggling_win_rate",params:{name:t.name||"Fighter 1",winRate:n},fighter:t.name}),a>=75?h.push({type:"positive",text:`${i.name||"Fighter 2"} has ${a}% win rate`,textKey:"combat_analysis.trends.high_win_rate",params:{name:i.name||"Fighter 2",winRate:a},fighter:i.name}):a<50&&h.push({type:"negative",text:`${i.name||"Fighter 2"} struggling at ${a}% win rate`,textKey:"combat_analysis.trends.struggling_win_rate",params:{name:i.name||"Fighter 2",winRate:a},fighter:i.name});const l=(t.rawData.Fight_Duration_Seconds||900)/60,c=(i.rawData.Fight_Duration_Seconds||900)/60,g=(l+c)/2;return h.push({type:"neutral",text:`Combined average fight time: ${g.toFixed(1)} minutes`,textKey:"combat_analysis.trends.avg_fight_time",params:{avgTime:g.toFixed(1)}}),h}calculateMomentum(t){const i=t.streak;if(i===0)return 0;const h=Math.abs(i);return i>0?h>=3?.08:h>=2?.05:.02:h>=3?-.08:h>=2?-.05:-.02}calculateDamageMultiplier(t){return t===0?1:t===1?1.1:t===2?1.25:t===3?1.4:t===4?1.6:1.8}calculateAgeImpact(t){const i=this.calculateAge(t),n={Flyweight:30,Bantamweight:30,Featherweight:31,Lightweight:31,Welterweight:32,Middleweight:32,"Light Heavyweight":33,Heavyweight:34}[t.division]||32,a=(t.rawData.loss_ko||0)+(t.rawData.loss_tko||0),l=this.calculateDamageMultiplier(a),c=(i-n)*l;if(c<=0)return 1;let g=0;return c<=5?g=c*.01:c<=10?g=.05+(c-5)*.015:g=.125+(c-10)*.02,g=Math.min(g,.3),1-g}calculateAge(t){if(t.age&&t.age>0)return t.age;if(t.birthDate||t.rawData.Birth_Date){const a=t.birthDate||t.rawData.Birth_Date,l=new Date(a);if(!isNaN(l.getTime())){const c=new Date;let g=c.getFullYear()-l.getFullYear();const v=c.getMonth()-l.getMonth();return(v<0||v===0&&c.getDate()<l.getDate())&&g--,g}}const i=25,h=2.5,n=t.rawData.Number_of_Fights_36m||0;return Math.round(i+n/h)}getInactiveMonths(t){const i=t.rawData.Number_of_Fights_36m||0;return i>=3?0:i>=2?6:i>=1?12:24}getFightsInPeriod(t,i){const h=i/36;return Math.round((t.rawData.Number_of_Fights_36m||0)*h)}hasBodyShotThreat(t,i){const h=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko)/t.rawData.Number_of_Fights_36m*100:0,n=i.rawData.Number_of_Fights_36m>0?(i.rawData.win_ko+i.rawData.win_tko)/i.rawData.Number_of_Fights_36m*100:0;return h>40||n>40}getWeightedMetric(t,i,h,n,a=.5){const l=h.probability/100,c=1-l;return h.winner===n?t*l+i*c*a:i*l+t*c*a}getFighterStyle(t){const i=t.rawData.Sig_Strikes_Thrown>0?t.rawData.Takedowns_Attempted/t.rawData.Sig_Strikes_Thrown*100:0,h=t.rawData.Number_of_Fights_36m>0?t.rawData.win_sub/t.rawData.Number_of_Fights_36m*100:0,n=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko)/t.rawData.Number_of_Fights_36m*100:0;return i>15||h>25?"grappler":n>30&&i<10?"striker":"balanced"}hasDominantGrappler(t,i){const h=this.getFighterStyle(t),n=this.getFighterStyle(i),a=t.rawData.Sig_Strikes_Thrown>0?t.rawData.Takedowns_Attempted/t.rawData.Sig_Strikes_Thrown*100:0,l=i.rawData.Sig_Strikes_Thrown>0?i.rawData.Takedowns_Attempted/i.rawData.Sig_Strikes_Thrown*100:0;return h==="grappler"&&a>20||n==="grappler"&&l>20}isStrikerWar(t,i){return this.getFighterStyle(t)==="striker"&&this.getFighterStyle(i)==="striker"}calculateBettingMetrics(t,i,h){const n=t.rawData.Number_of_Fights_36m>0?(t.rawData.win_ko+t.rawData.win_tko+t.rawData.win_sub)/t.rawData.Number_of_Fights_36m*100:0,a=i.rawData.Number_of_Fights_36m>0?(i.rawData.win_ko+i.rawData.win_tko+i.rawData.win_sub)/i.rawData.Number_of_Fights_36m*100:0,l=(t.rawData.Fight_Duration_Seconds||900)/60,c=(i.rawData.Fight_Duration_Seconds||900)/60;return{f1TakedownRate:t.rawData.Sig_Strikes_Thrown>0?t.rawData.Takedowns_Attempted/t.rawData.Sig_Strikes_Thrown*100:0,f2TakedownRate:i.rawData.Sig_Strikes_Thrown>0?i.rawData.Takedowns_Attempted/i.rawData.Sig_Strikes_Thrown*100:0,f1KnockdownRate:t.rawData.Number_of_Fights_36m>0?t.rawData.Knockdowns/t.rawData.Number_of_Fights_36m:0,f2KnockdownRate:i.rawData.Number_of_Fights_36m>0?i.rawData.Knockdowns/i.rawData.Number_of_Fights_36m:0,f1StrikeVolume:t.rawData.Sig_Strikes_Thrown||0,f2StrikeVolume:i.rawData.Sig_Strikes_Thrown||0,f1SubRate:t.rawData.Number_of_Fights_36m>0?t.rawData.Sub_Attempts/t.rawData.Number_of_Fights_36m:0,f2SubRate:i.rawData.Number_of_Fights_36m>0?i.rawData.Sub_Attempts/i.rawData.Number_of_Fights_36m:0,f1FinishRate:n,f2FinishRate:a,avgFightTime:(l+c)/2,weightedFinishRate:h?this.getWeightedMetric(n,a,h,t,.5):void 0,weightedAvgFightTime:h?this.getWeightedMetric(l,c,h,t,1):void 0}}getWinReasoningKey(t,i,h,n){return t.overall>i.overall+20?"combat_analysis.reasoning.significant_rating_advantage":t.performance>i.performance+10?"combat_analysis.reasoning.significant_performance_advantage":t.fightIQ>i.fightIQ+10?"combat_analysis.reasoning.superior_tactical_iq":h>n+20?"combat_analysis.reasoning.better_recent_record":"combat_analysis.reasoning.slight_combined_advantage"}getConfidenceLevel(t){return t>=this.MIN_HIGH_CONFIDENCE?"high":t>=this.MIN_MEDIUM_CONFIDENCE?"medium":(t>=this.MIN_LOW_CONFIDENCE,"low")}createMoneylineCard(t){return{id:"moneyline",type:"fight_winner",category:"primary",title:"Fight Winner (Moneyline)",titleKey:"betting_markets.fight_winner",prediction:t.winner.name||"Unknown Fighter",confidence:t.probability,confidenceLevel:this.getConfidenceLevel(t.probability),reasoning:t.reasoning,reasoningKey:t.reasoning,metadata:{adjustedScore1:t.adjustedScore1,adjustedScore2:t.adjustedScore2},priority:1}}createMethodOfVictoryCard(t){return{id:"method-of-victory",type:"method_of_victory",category:"secondary",title:"Method of Victory",titleKey:"betting_markets.method_of_victory",prediction:t.method,predictionKey:t.methodKey,confidence:t.probability,confidenceLevel:this.getConfidenceLevel(t.probability),reasoning:t.reasoning,reasoningKey:t.reasoning,metadata:{finishRate1:t.finishRate1,finishRate2:t.finishRate2},priority:2}}createTotalRoundsCard(t){return{id:"total-rounds",type:"total_rounds",category:"secondary",title:"Total Rounds (Over/Under)",titleKey:"betting_markets.total_rounds",prediction:t.prediction,predictionKey:t.predictionKey,confidence:t.probability,confidenceLevel:this.getConfidenceLevel(t.probability),reasoning:t.reasoning,reasoningKey:t.reasoning,explanationKey:t.explanationKey,metadata:{avgTime:t.avgTime},priority:3}}createFightPropsCard(t){return{id:"fight-props",type:"fight_props",category:"prop",title:"Fight Props",titleKey:"betting_markets.fight_props",prediction:t.prop,predictionKey:t.propKey,confidence:60,confidenceLevel:"medium",reasoning:t.reasoning,reasoningKey:t.reasoning,explanationKey:t.explanationKey,metadata:{value:t.value,valueKey:t.valueKey,metrics:t.metrics},priority:7}}createRoundBettingCard(t){return{id:"round-betting",type:"winner_and_round",category:"secondary",title:"Round Betting",titleKey:"betting_markets.round_betting",prediction:t.prediction,predictionKey:t.predictionKey,confidence:t.probability,confidenceLevel:this.getConfidenceLevel(t.probability),reasoning:t.reasoning,reasoningKey:t.reasoning,explanationKey:t.explanationKey,metadata:{avgTime:t.avgTime},priority:4}}createMethodAndRoundCard(t){const i=t.probability||70;return{id:"method-and-round",type:"winner_and_round",category:"secondary",title:"Method & Round",titleKey:"betting_markets.method_and_round",prediction:t.prop,predictionKey:t.propKey,confidence:i,confidenceLevel:this.getConfidenceLevel(i),reasoning:t.reasoning,reasoningKey:t.reasoning,explanationKey:t.explanationKey,metadata:{value:t.value,valueKey:t.valueKey,metrics:t.metrics},priority:5}}createKeyFactorsCard(t){return{id:"key-factors",type:"key_factors",category:"statistical",title:"Key Factors",titleKey:"combat_analysis.key_factors_title",prediction:"Statistical Analysis",predictionKey:"combat_analysis.key_factors_title",confidence:100,confidenceLevel:"high",reasoning:"Statistical analysis of key performance metrics",reasoningKey:"combat_analysis.reasoning.statistical_analysis",metadata:{factors:t},priority:8}}createTrendsCard(t){return{id:"trends",type:"trends",category:"statistical",title:"Recent Trends",titleKey:"combat_analysis.trends_title",prediction:"Recent Trends",predictionKey:"combat_analysis.trends_title",confidence:100,confidenceLevel:"high",reasoning:"Analysis of recent performance trends",reasoningKey:"combat_analysis.reasoning.trend_analysis",metadata:{trends:t},priority:9}}createNoPredictionCard(){return{id:"no-predictions",type:"no_prediction",category:"primary",title:"Inconclusive Analysis",titleKey:"combat_analysis.inconclusive_analysis",prediction:"Insufficient Data",predictionKey:"combat_analysis.insufficient_data",confidence:0,confidenceLevel:"low",reasoning:"Not enough reliable data to make confident predictions",reasoningKey:"combat_analysis.insufficient_data_explanation",priority:10}}hasHighConfidencePredictions(t){return t.some(i=>(i.type==="fight_winner"||i.type==="method_of_victory"||i.type==="total_rounds"||i.type==="winner_and_round"||i.type==="fight_props")&&i.confidence>=this.MIN_MEDIUM_CONFIDENCE)}sortBetCardsByPriority(t){return t.sort((i,h)=>i.priority-h.priority)}}const Vt=new qa;var Ya=E('<div><div class="bet-type svelte-1i86osu"> </div> <div class="bet-prediction svelte-1i86osu"><div class="winner-name svelte-1i86osu"> </div> <div class="confidence svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div></div>'),ja=E('<div><div class="bet-type svelte-1i86osu"> </div> <div class="bet-prediction svelte-1i86osu"><div class="method svelte-1i86osu"> </div> <div class="probability svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div></div>'),Qa=E('<div class="bet-explanation svelte-1i86osu"> </div>'),Za=E('<div class="bet-explanation svelte-1i86osu"> </div>'),Ja=E('<div><div class="bet-type svelte-1i86osu"> </div> <div class="bet-prediction svelte-1i86osu"><div class="rounds"> </div> <div class="probability svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div> <!></div>'),Xa=E('<div><div class="bet-type svelte-1i86osu"> </div> <div class="bet-prediction svelte-1i86osu"><div class="round"> </div> <div class="probability svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div></div>'),ei=E('<div><div class="bet-type svelte-1i86osu"> </div> <div class="bet-prediction svelte-1i86osu"><div class="method-round-combo"> </div> <div class="value svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div></div>'),ti=E('<div><div class="bet-type svelte-1i86osu"> </div> <div class="bet-prediction svelte-1i86osu"><div class="decision"> </div> <div class="probability svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div></div>'),ai=E('<div><div class="bet-type svelte-1i86osu"> </div> <div class="bet-prediction svelte-1i86osu"><div class="gone-60"> </div> <div class="probability svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div></div>'),ii=E('<div class="bet-card no-predictions svelte-1i86osu"><div class="bet-type svelte-1i86osu"><!> </div> <div class="bet-prediction svelte-1i86osu"><div class="no-pred-title svelte-1i86osu"> </div> <div class="no-pred-subtitle svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div></div>'),si=E('<div class="bet-explanation svelte-1i86osu"> </div>'),ri=E('<div class="bet-explanation svelte-1i86osu"> </div>'),ni=E('<div class="bet-card fight-props svelte-1i86osu"><div class="bet-type svelte-1i86osu"><!> </div> <div class="bet-prediction svelte-1i86osu"><div class="prop svelte-1i86osu"> </div> <div class="value svelte-1i86osu"> </div></div> <div class="reasoning svelte-1i86osu"> </div> <!></div>'),oi=E('<div class="stat-item svelte-1i86osu"><span class="stat-label svelte-1i86osu"> </span> <span class="stat-value svelte-1i86osu"> </span></div>'),li=E('<div class="bet-card stats svelte-1i86osu"><div class="bet-type svelte-1i86osu"> </div> <div class="key-stats svelte-1i86osu"></div></div>'),di=E("<div><!></div>"),vi=E('<div class="bet-card trends svelte-1i86osu"><div class="bet-type svelte-1i86osu"> </div> <div class="trend-list svelte-1i86osu"></div></div>'),ci=E('<div class="fight-best-bets svelte-1i86osu"><div class="header svelte-1i86osu"><h2 class="title svelte-1i86osu"><span class="icon svelte-1i86osu"><!></span> </h2> <hr class="title-divider svelte-1i86osu"/> <div class="subtitle svelte-1i86osu"> </div></div> <div class="matchup-header svelte-1i86osu"><div class="fighter-preview svelte-1i86osu"><div class="fighter-name svelte-1i86osu"> </div> <div class="fighter-record svelte-1i86osu"> </div> <div class="fighter-archetype svelte-1i86osu"> </div></div> <div class="vs-divider svelte-1i86osu"><span>VS</span></div> <div class="fighter-preview svelte-1i86osu"><div class="fighter-name svelte-1i86osu"> </div> <div class="fighter-record svelte-1i86osu"> </div> <div class="fighter-archetype svelte-1i86osu"> </div></div></div> <div><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="disclaimer svelte-1i86osu"><small class="svelte-1i86osu"> </small></div></div>');function _i(j,t){gt(t,!1);const[i,h]=mt(),n=()=>vt(wa,"$locale",i),a=()=>vt(ft,"$_",i),l=T(),c=T(),g=T(),v=T(),m=T(),f=T(),y=T(),R=T(),J=T(),ae=T(),A=T(),X=T(),Z=T(),ie=T(),F=T(),k=T(),S=T(),G=T(),K=T(),be=T();let O=Je(t,"fighter1",8,null),U=Je(t,"fighter2",8,null);function ve(C,he){return C.filter(Te=>Te.type===he)}function z(C){switch(C){case bt.HIGH:return"high-confidence";case bt.MEDIUM:return"medium-confidence";case bt.LOW:return"low-confidence";default:return""}}let xe=n();L(()=>(M(O()),M(U())),()=>{b(l,O()&&U())}),L(()=>(e(l),M(O()),M(U())),()=>{b(c,e(l)?Vt.generateBetCards(O(),U()):[])}),L(()=>e(c),()=>{b(g,Vt.validatePredictions(e(c)))}),L(()=>(e(l),M(O()),M(U()),e(g),ct),()=>{e(l)&&O()&&U()&&e(g).length>0&&ct.trackBettingAnalysis(O().name,U().name)}),L(()=>(e(g),ye),()=>{b(v,ve(e(g),ye.FIGHT_WINNER))}),L(()=>(e(g),ye),()=>{b(m,ve(e(g),ye.METHOD_OF_VICTORY))}),L(()=>(e(g),ye),()=>{b(f,ve(e(g),ye.TOTAL_ROUNDS))}),L(()=>(e(g),ye),()=>{b(y,ve(e(g),ye.WINNER_AND_ROUND))}),L(()=>(e(g),ye),()=>{b(R,ve(e(g),ye.DISTANCE_YES_NO))}),L(()=>(e(g),ye),()=>{b(J,ve(e(g),ye.GOES_TO_DECISION))}),L(()=>(e(g),ye),()=>{b(ae,ve(e(g),ye.GONE_IN_60))}),L(()=>(e(g),ye),()=>{b(A,ve(e(g),ye.FIGHT_PROPS))}),L(()=>(e(g),ye),()=>{b(X,ve(e(g),ye.KEY_FACTORS))}),L(()=>(e(g),ye),()=>{b(Z,ve(e(g),ye.TRENDS))}),L(()=>(e(g),ye),()=>{b(ie,ve(e(g),ye.NO_PREDICTION))}),L(()=>(e(v),e(m),e(f),e(y),e(R),e(J),e(ae)),()=>{b(F,e(v).length+e(m).length+e(f).length+e(y).length+e(R).length+e(J).length+e(ae).length)}),L(()=>e(F),()=>{b(k,e(F)>0)}),L(()=>e(k),()=>{b(S,e(k)?0:1)}),L(()=>(e(A),e(X),e(Z)),()=>{b(G,e(A).length+e(X).length+e(Z).length)}),L(()=>(e(F),e(S),e(G)),()=>{b(K,e(F)+e(S)+e(G))}),L(()=>n(),()=>{n()!==xe&&xe&&window.location.reload()}),L(()=>e(l),()=>{b(be,e(l))}),wt(),ut();var Ee=lt(),le=Be(Ee);{var Re=C=>{var he=ci(),Te=s(he),De=s(Te),Le=s(De),Ie=s(Le);zt(Ie,{size:32});var qe=d(Le),q=d(De,4),$e=s(q),Xe=d(Te,2),it=s(Xe),He=s(it),fe=s(He),Ce=d(He,2),Ye=s(Ce),Qe=d(Ce,2),ue=s(Qe),Ne=d(it,4),et=s(Ne),st=s(et),ot=d(et,2),u=s(ot),p=d(ot,2),x=s(p),I=d(Xe,2);let Y;var se=s(I);Ge(se,1,()=>e(v),ze,(P,r)=>{var w=Ya(),N=s(w),Q=s(N),W=d(N,2),H=s(W),V=s(H),ce=d(H,2),pe=s(ce),me=d(W,2),ge=s(me);$((te,ne,Fe,_e)=>{Pe(w,1,`bet-card moneyline ${te??""}`,"svelte-1i86osu"),_(Q,ne),_(V,(e(r),o(()=>e(r).prediction))),_(pe,`${e(r),o(()=>e(r).confidence)??""}% ${Fe??""}`),_(ge,_e)},[()=>(e(r),o(()=>z(e(r).confidenceLevel))),()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(a(),o(()=>a()("combat_analysis.probability"))),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var we=d(se,2);Ge(we,1,()=>e(m),ze,(P,r)=>{var w=ja(),N=s(w),Q=s(N),W=d(N,2),H=s(W),V=s(H),ce=d(H,2),pe=s(ce),me=d(W,2),ge=s(me);$((te,ne,Fe,_e,ee)=>{Pe(w,1,`bet-card method-victory ${te??""}`,"svelte-1i86osu"),_(Q,ne),_(V,Fe),_(pe,`${e(r),o(()=>e(r).confidence)??""}% ${_e??""}`),_(ge,ee)},[()=>(e(r),o(()=>z(e(r).confidenceLevel))),()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(a(),o(()=>a()("combat_analysis.probability"))),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var de=d(we,2);Ge(de,1,()=>e(f),ze,(P,r)=>{var w=Ja(),N=s(w),Q=s(N),W=d(N,2),H=s(W),V=s(H),ce=d(H,2),pe=s(ce),me=d(W,2),ge=s(me),te=d(me,2);{var ne=_e=>{var ee=Qa(),Ae=s(ee);$(je=>_(Ae,je),[()=>(a(),e(r),o(()=>a()(e(r).explanationKey)))]),D(_e,ee)},Fe=_e=>{var ee=lt(),Ae=Be(ee);{var je=Ve=>{var at=Za(),dt=s(at);$(()=>_(dt,(e(r),o(()=>e(r).explanation)))),D(Ve,at)};oe(Ae,Ve=>{e(r),o(()=>e(r).explanation)&&Ve(je)},!0)}D(_e,ee)};oe(te,_e=>{e(r),o(()=>e(r).explanationKey)?_e(ne):_e(Fe,!1)})}$((_e,ee,Ae,je,Ve)=>{Pe(w,1,`bet-card total-rounds ${_e??""}`,"svelte-1i86osu"),_(Q,ee),_(V,Ae),_(pe,`${e(r),o(()=>e(r).confidence)??""}% ${je??""}`),_(ge,Ve)},[()=>(e(r),o(()=>z(e(r).confidenceLevel))),()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(a(),o(()=>a()("combat_analysis.probability"))),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var Ke=d(de,2);Ge(Ke,1,()=>e(y),ze,(P,r)=>{var w=Xa(),N=s(w),Q=s(N),W=d(N,2),H=s(W),V=s(H),ce=d(H,2),pe=s(ce),me=d(W,2),ge=s(me);$((te,ne,Fe,_e,ee)=>{Pe(w,1,`bet-card round-betting ${te??""}`,"svelte-1i86osu"),_(Q,ne),_(V,Fe),_(pe,`${e(r),o(()=>e(r).confidence)??""}% ${_e??""}`),_(ge,ee)},[()=>(e(r),o(()=>z(e(r).confidenceLevel))),()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(a(),o(()=>a()("combat_analysis.probability"))),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var Oe=d(Ke,2);Ge(Oe,1,()=>e(R),ze,(P,r)=>{var w=ei(),N=s(w),Q=s(N),W=d(N,2),H=s(W),V=s(H),ce=d(H,2),pe=s(ce),me=d(W,2),ge=s(me);$((te,ne,Fe,_e,ee)=>{Pe(w,1,`bet-card method-round ${te??""}`,"svelte-1i86osu"),_(Q,ne),_(V,Fe),_(pe,_e),_(ge,ee)},[()=>(e(r),o(()=>z(e(r).confidenceLevel))),()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(e(r),a(),o(()=>e(r).metadata?.valueKey?a()(e(r).metadata.valueKey):e(r).metadata?.value||"N/A")),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var We=d(Oe,2);Ge(We,1,()=>e(J),ze,(P,r)=>{var w=ti(),N=s(w),Q=s(N),W=d(N,2),H=s(W),V=s(H),ce=d(H,2),pe=s(ce),me=d(W,2),ge=s(me);$((te,ne,Fe,_e,ee)=>{Pe(w,1,`bet-card decision-type ${te??""}`,"svelte-1i86osu"),_(Q,ne),_(V,Fe),_(pe,`${e(r),o(()=>e(r).confidence)??""}% ${_e??""}`),_(ge,ee)},[()=>(e(r),o(()=>z(e(r).confidenceLevel))),()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(a(),o(()=>a()("combat_analysis.probability"))),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var Ue=d(We,2);Ge(Ue,1,()=>e(ae),ze,(P,r)=>{var w=ai(),N=s(w),Q=s(N),W=d(N,2),H=s(W),V=s(H),ce=d(H,2),pe=s(ce),me=d(W,2),ge=s(me);$((te,ne,Fe,_e,ee)=>{Pe(w,1,`bet-card gone-in-60 ${te??""}`,"svelte-1i86osu"),_(Q,ne),_(V,Fe),_(pe,`${e(r),o(()=>e(r).confidence)??""}% ${_e??""}`),_(ge,ee)},[()=>(e(r),o(()=>z(e(r).confidenceLevel))),()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(a(),o(()=>a()("combat_analysis.probability"))),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var tt=d(Ue,2);Ge(tt,1,()=>e(ie),ze,(P,r)=>{var w=ii(),N=s(w),Q=s(N);Tt(Q,{size:16,style:"display: inline; margin-right: 0.25rem;"});var W=d(Q),H=d(N,2),V=s(H),ce=s(V),pe=d(V,2),me=s(pe),ge=d(H,2),te=s(ge);$((ne,Fe,_e,ee)=>{_(W,` ${ne??""}`),_(ce,Fe),_(me,_e),_(te,ee)},[()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(a(),o(()=>a()("combat_analysis.confidence_threshold"))),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var rt=d(tt,2);Ge(rt,1,()=>e(A),ze,(P,r)=>{var w=ni(),N=s(w),Q=s(N);Gt(Q,{size:16,style:"display: inline; margin-right: 0.25rem;"});var W=d(Q),H=d(N,2),V=s(H),ce=s(V),pe=d(V,2),me=s(pe),ge=d(H,2),te=s(ge),ne=d(ge,2);{var Fe=ee=>{var Ae=si(),je=s(Ae);$(Ve=>_(je,Ve),[()=>(a(),e(r),o(()=>a()(e(r).explanationKey)))]),D(ee,Ae)},_e=ee=>{var Ae=lt(),je=Be(Ae);{var Ve=at=>{var dt=ri(),Dt=s(dt);$(()=>_(Dt,(e(r),o(()=>e(r).explanation)))),D(at,dt)};oe(je,at=>{e(r),o(()=>e(r).explanation)&&at(Ve)},!0)}D(ee,Ae)};oe(ne,ee=>{e(r),o(()=>e(r).explanationKey)?ee(Fe):ee(_e,!1)})}$((ee,Ae,je,Ve,at)=>{_(W,` ${ee??""}`),_(ce,Ae),_(me,`${je??""}: ${Ve??""}`),_(te,at)},[()=>(a(),e(r),o(()=>a()(e(r).titleKey))),()=>(e(r),a(),o(()=>e(r).predictionKey?a()(e(r).predictionKey):e(r).prediction)),()=>(a(),o(()=>a()("combat_analysis.value"))),()=>(e(r),a(),o(()=>e(r).metadata?.valueKey?a()(e(r).metadata.valueKey):e(r).metadata?.value||"N/A")),()=>(a(),e(r),o(()=>a()(e(r).reasoningKey)))]),D(P,w)});var nt=d(rt,2);Ge(nt,1,()=>e(X),ze,(P,r)=>{var w=li(),N=s(w),Q=s(N),W=d(N,2);Ge(W,5,()=>(e(r),o(()=>e(r).metadata?.factors||[])),ze,(H,V)=>{var ce=oi(),pe=s(ce),me=s(pe),ge=d(pe,2),te=s(ge);$(ne=>{_(me,ne),_(te,(e(V),o(()=>e(V).value)))},[()=>(a(),e(V),o(()=>a()(e(V).label)))]),D(H,ce)}),$(H=>_(Q,H),[()=>(a(),e(r),o(()=>a()(e(r).titleKey)))]),D(P,w)});var B=d(nt,2);Ge(B,1,()=>e(Z),ze,(P,r)=>{var w=vi(),N=s(w),Q=s(N),W=d(N,2);Ge(W,5,()=>(e(r),o(()=>e(r).metadata?.trends||[])),ze,(H,V)=>{var ce=di(),pe=s(ce);{var me=te=>{var ne=ht();$(Fe=>_(ne,Fe),[()=>(a(),e(V),o(()=>a()(e(V).textKey,{values:e(V).params||{}})))]),D(te,ne)},ge=te=>{var ne=ht();$(()=>_(ne,(e(V),o(()=>e(V).text)))),D(te,ne)};oe(pe,te=>{e(V),o(()=>e(V).textKey)?te(me):te(ge,!1)})}$(()=>Pe(ce,1,`trend-item ${e(V),o(()=>e(V).type)??""}`,"svelte-1i86osu")),D(H,ce)}),$(H=>_(Q,H),[()=>(a(),e(r),o(()=>a()(e(r).titleKey)))]),D(P,w)});var re=d(I,2),Se=s(re),Me=s(Se);$((P,r,w,N)=>{_(qe,` ${P??""}`),_($e,r),_(fe,(M(O()),o(()=>O().name))),_(Ye,`${M(O()),o(()=>O().rawData.win)??""}-${M(O()),o(()=>O().rawData.loss)??""}-${M(O()),o(()=>O().rawData.draws)??""}`),_(ue,(M(O()),o(()=>O().archetype.archetypeEmojis))),_(st,(M(U()),o(()=>U().name))),_(u,`${M(U()),o(()=>U().rawData.win)??""}-${M(U()),o(()=>U().rawData.loss)??""}-${M(U()),o(()=>U().rawData.draws)??""}`),_(x,(M(U()),o(()=>U().archetype.archetypeEmojis))),Y=Pe(I,1,"betting-grid svelte-1i86osu",null,Y,w),_(Me,`* ${N??""}`)},[()=>(a(),o(()=>a()("combat_analysis.fight_analysis"))),()=>(a(),o(()=>a()("combat_analysis.last_36_months_only"))),()=>({"few-cards":e(K)<=3}),()=>(a(),o(()=>a()("combat_analysis.disclaimer")))]),D(C,he)};oe(le,C=>{e(be)&&C(Re)})}D(j,Ee),pt(),h()}var hi=E('<div class="loading svelte-1r8it4n" id="loading"><div class="loading-content svelte-1r8it4n"><div class="spinner svelte-1r8it4n"></div> <p class="svelte-1r8it4n"> </p></div></div>'),gi=E('<button class="share-fight-btn svelte-1r8it4n"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="svelte-1r8it4n"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z" class="svelte-1r8it4n"></path></svg> </button>'),ui=E('<div class="action-buttons-section svelte-1r8it4n"><!> <button class="clear-radars-btn svelte-1r8it4n"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="svelte-1r8it4n"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" class="svelte-1r8it4n"></path></svg> </button></div>'),pi=E('<div class="controls svelte-1r8it4n"><div class="fighter-selectors svelte-1r8it4n"><div class="control-group svelte-1r8it4n"><label for="fighter1-select" class="svelte-1r8it4n"> </label> <div id="fighter1-container-select" class="svelte-1r8it4n"><!></div></div> <div class="vs-divider svelte-1r8it4n">VS</div> <div class="control-group svelte-1r8it4n"><label for="fighter2-select" class="svelte-1r8it4n"> </label> <div id="fighter2-container-select" class="svelte-1r8it4n"><!></div></div></div> <!></div>'),mi=E('<div class="division-disclaimer svelte-1r8it4n"><div class="disclaimer-title svelte-1r8it4n"><!> <strong class="svelte-1r8it4n"> </strong></div> <div class="disclaimer-text svelte-1r8it4n"> </div></div>'),fi=E('<div class="fighter-info svelte-1r8it4n"><div id="fighter1-container" class="svelte-1r8it4n"><!></div> <div id="fighter2-container" class="svelte-1r8it4n"><!></div></div>'),yi=E('<div class="radar-container svelte-1r8it4n"><div id="fight-radar-container" class="svelte-1r8it4n"><!></div> <div id="iq-radar-container" class="svelte-1r8it4n"><!></div></div>'),bi=E('<div class="fight-radar-app svelte-1r8it4n"><div class="container svelte-1r8it4n"><!> <!> <!> <!> <!> <!> <!> <!></div></div>');function Si(j,t){gt(t,!1);const[i,h]=mt(),n=()=>vt(S,"$urlSearchParams",i),a=()=>vt(ft,"$_",i),l=T(),c=T(),g=T(),v=T(),m=T(),f=T(),y=T(),R=T(),J=T(),ae=T();let A=Je(t,"isDarkMode",8,!0),X=Je(t,"toggleTheme",8,()=>{}),Z=T(new Map),ie=T(new Map),F=T(),k=T(new Map);const S=ma(_t());function G(u,p){const x=`fighter${p}`;It({[x]:u}),S.set(_t())}let K=T(!1),be=T(!1),O=T(!1),U=T(!1);fa(()=>{window.Highcharts=ya,S.set(_t());const u=Da(()=>{S.set(_t())});return ve(),u});async function ve(){try{b(K,!0);const{allRawFightersDataMap:u,allRawFightersByDivision:p,processedFightersMap:x,processedFighters:I}=await ka.loadFightersFromCSV();b(Z,u),b(k,p),b(ie,x),b(F,I),b(be,!0)}catch(u){console.error("Error loading data:",u)}finally{b(K,!1)}}function z(u=[]){return u.map(p=>({value:p.nameWithNickname,label:p.name,imageUrl:xe(p)}))}function xe(u){return u.pictureUrl&&u.pictureUrl!==""?u.pictureUrl:Ee(u.division)?"no_photo_female.png":"no_photo_male.png"}function Ee(u){return!!(u&&u.startsWith("W_"))}function le(u){G(u,1)}function Re(u){G(u,2)}function C(){ct.trackEvent("clear_radars",{category:"User Interaction",label:"Clear Fighter Selection",fighter1:e(l)||"none",fighter2:e(c)||"none"}),It({fighter1:"",fighter2:""}),S.set(_t())}function he(){if(!e(l)||!e(c))return;const u=navigator.share&&typeof navigator.share=="function"?"web_share_api":"clipboard";ct.trackFightShare(e(l),e(c),u);const p=Fa("/",{fighter1:e(l),fighter2:e(c)});navigator.share&&typeof navigator.share=="function"?navigator.share({title:`${e(l)} vs ${e(c)} - Fight Radar`,text:`Compara las estadísticas de ${e(l)} vs ${e(c)}`,url:p}).catch(console.error):navigator.clipboard.writeText(p).then(()=>{Te("¡Enlace copiado al portapapeles!")}).catch(()=>{prompt("Copia este enlace para compartir la pelea:",p)})}function Te(u){const p=document.createElement("div");p.className="notification",p.textContent=u,p.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--accent-color);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      z-index: 10000;
      font-weight: 500;
      opacity: 0;
      transform: translateY(-20px);
      transition: all 0.3s ease;
    `,document.body.appendChild(p),setTimeout(()=>{p.style.opacity="1",p.style.transform="translateY(0)"},10),setTimeout(()=>{p.style.opacity="0",p.style.transform="translateY(-20px)",setTimeout(()=>{document.body.removeChild(p)},300)},3e3)}function De(u,p,x){const I=[];return u&&I.push({name:u.name,data:[u.fightRadar.STR_OFF,u.fightRadar.STR_DEF,u.fightRadar.TD_OFF,u.fightRadar.TD_DEF,u.fightRadar.CTRL,u.fightRadar.FIN_THREAT],pointPlacement:"on",color:"var(--fighter1-color)"}),p&&I.push({name:p.name,data:[p.fightRadar.STR_OFF,p.fightRadar.STR_DEF,p.fightRadar.TD_OFF,p.fightRadar.TD_DEF,p.fightRadar.CTRL,p.fightRadar.FIN_THREAT],pointPlacement:"on",color:"var(--fighter2-color)"}),x&&I.push({name:x.name,data:[x.fightRadar.STR_OFF,x.fightRadar.STR_DEF,x.fightRadar.TD_OFF,x.fightRadar.TD_DEF,x.fightRadar.CTRL,x.fightRadar.FIN_THREAT],pointPlacement:"on",color:"var(--avgFighter-color)",visible:!1}),I}function Le(u,p,x){const I=[];return u&&I.push({name:u.name,data:[u.iqRadar.distance,u.iqRadar.adaptability,u.iqRadar.composure,u.iqRadar.decisions,u.iqRadar.rhythm,u.iqRadar.feints],pointPlacement:"on",color:"var(--fighter1-color)"}),p&&I.push({name:p.name,data:[p.iqRadar.distance,p.iqRadar.adaptability,p.iqRadar.composure,p.iqRadar.decisions,p.iqRadar.rhythm,p.iqRadar.feints],pointPlacement:"on",color:"var(--fighter2-color)"}),x&&I.push({name:x.name,data:[x.iqRadar.distance,x.iqRadar.adaptability,x.iqRadar.composure,x.iqRadar.decisions,x.iqRadar.rhythm,x.iqRadar.feints],pointPlacement:"on",color:"var(--avgFighter-color)",visible:!1}),I}function Ie(u){const p={AT:"rgba(220, 53, 69, 0.3)",ANT:"rgba(255, 193, 7, 0.3)",PT:"rgba(13, 110, 253, 0.3)",PNT:"rgba(25, 135, 84, 0.3)"},[x,I,Y]=u.combinedRole.split("+")??["AT"];let se=[[x,100]];if(I&&Y?se=[[x,33],[I,34],[Y,33]]:I?se=[[x,50],[I,50]]:Y&&(se=[[x,60],[Y,40]]),se.length===1){const[we,de]=se[0],Ke=Math.min(de,70);return`linear-gradient(135deg, ${p[we]} 0%, ${p[we]} ${Ke}%, var(--card-bg) 100%)`}else{const we=se.reduce((We,[,Ue])=>We+Ue,0);let de=[],Ke=0;return se.forEach(([We,Ue],tt)=>{const rt=Ue/we*85,nt=p[We];tt===0&&de.push(`${nt} ${Ke}%`),Ke+=rt,tt===se.length-1?(de.push(`${nt} ${Ke}%`),de.push("var(--card-bg) 100%")):de.push(`${nt} ${Ke}%`)}),`linear-gradient(135deg, ${de.join(", ")})`}}L(()=>n(),()=>{b(l,n().get("fighter1")||"")}),L(()=>n(),()=>{b(c,n().get("fighter2")||"")}),L(()=>(e(F),e(c)),()=>{b(g,z(e(F)).filter(u=>u.value!==e(c)))}),L(()=>(e(F),e(l)),()=>{b(v,z(e(F)).filter(u=>u.value!==e(l)))}),L(()=>(e(l),e(c),e(Z),e(k),Ot),()=>{b(m,(()=>{if(!e(l)||!e(c))return null;const u=e(Z).get(e(l)),p=e(Z).get(e(c));if(!u||!p)return null;if(u.Division===p.Division){const x=u.Division;if(e(k).has(x))return Ot(x,e(k).get(x))}return null})())}),L(()=>(e(l),e(ie)),()=>{b(f,e(l)?e(ie).get(e(l))??null:null)}),L(()=>(e(c),e(ie)),()=>{b(y,e(c)?e(ie).get(e(c))??null:null)}),L(()=>(e(m),e(l),e(c),e(Z),e(k),At),()=>{b(R,(()=>{if(!e(m)||!e(l)||!e(c))return null;const u=e(Z).get(e(l));return!u||!e(k).has(u.Division)?null:At(e(m),e(k).get(u.Division))})())}),L(()=>(e(f),e(y),e(R)),()=>{b(J,De(e(f)??null,e(y)??null,e(R)??null))}),L(()=>(e(f),e(y),e(R)),()=>{b(ae,Le(e(f),e(y),e(R)))}),L(()=>(e(K),e(Z),e(l),e(c),ct),()=>{const u=!e(K)&&e(Z).size>0&&e(Z).has(e(l))&&e(Z).has(e(c));b(O,!!(e(l)&&e(c)&&u)),b(U,!!(e(l)&&e(c)&&u)),e(l)&&e(c)&&u&&ct.trackFighterComparison(e(l),e(c))}),wt(),ut();var qe=bi(),q=s(qe),$e=s(q);ba($e,{showThemeToggle:!0,get isDarkMode(){return A()},get toggleTheme(){return X()}});var Xe=d($e,2);{var it=u=>{var p=hi(),x=s(p),I=d(s(x),2),Y=s(I);$(se=>_(Y,se),[()=>(a(),o(()=>a()("fight_radar.loading_data")))]),D(u,p)};oe(Xe,u=>{e(K)&&u(it)})}var He=d(Xe,2);{var fe=u=>{var p=pi(),x=s(p),I=s(x),Y=s(I),se=s(Y),we=d(Y,2),de=s(we);{let B=yt(()=>(a(),o(()=>a()("common.select_fighter"))));Wt(de,{id:"fighter1-select",get placeholder(){return e(B)},disabled:!1,get options(){return e(g)},get selectedValue(){return e(l)},onSelectionChange:le})}var Ke=d(I,4),Oe=s(Ke),We=s(Oe),Ue=d(Oe,2),tt=s(Ue);{let B=yt(()=>(a(),o(()=>a()("common.select_fighter"))));Wt(tt,{id:"fighter2-select",get placeholder(){return e(B)},disabled:!1,get options(){return e(v)},get selectedValue(){return e(c)},onSelectionChange:Re})}var rt=d(x,2);{var nt=B=>{var re=ui(),Se=s(re);{var Me=w=>{var N=gi(),Q=d(s(N));$(W=>_(Q,` ${W??""}`),[()=>(a(),o(()=>a()("fight_radar.share_fight")))]),Ze("click",N,he),D(w,N)};oe(Se,w=>{e(l)&&e(c)&&w(Me)})}var P=d(Se,2),r=d(s(P));$(w=>_(r,` ${w??""}`),[()=>(a(),o(()=>a()("fight_radar.clear_radars")))]),Ze("click",P,C),D(B,re)};oe(rt,B=>{(e(l)||e(c))&&B(nt)})}$((B,re)=>{_(se,`${B??""}:`),_(We,`${re??""}:`)},[()=>(a(),o(()=>a()("common.fighter_1"))),()=>(a(),o(()=>a()("common.fighter_2")))]),D(u,p)};oe(He,u=>{e(be)&&u(fe)})}var Ce=d(He,2);{var Ye=u=>{var p=lt(),x=Be(p);{var I=Y=>{var se=mi(),we=s(se),de=s(we);Tt(de,{size:20,class:"disclaimer-icon"});var Ke=d(de,2),Oe=s(Ke),We=d(we,2),Ue=s(We);$((tt,rt)=>{_(Oe,tt),_(Ue,rt)},[()=>(a(),o(()=>a()("fight_radar.cross_division_title"))),()=>(a(),M(kt),e(f),e(y),o(()=>a()("fight_radar.cross_division_text",{values:{division1:kt(e(f).rawData.Division),division2:kt(e(y).rawData.Division)}})))]),D(Y,se)};oe(x,Y=>{e(f),e(y),o(()=>e(f)?.rawData&&e(y)?.rawData&&e(f).rawData.Division!==e(y).rawData.Division)&&Y(I)})}D(u,p)};oe(Ce,u=>{e(l)&&e(c)&&e(O)&&u(Ye)})}var Qe=d(Ce,2);{var ue=u=>{var p=fi(),x=s(p),I=s(x);Ut(I,{get fighter(){return e(f)},id:"fighter1-info"});var Y=d(x,2),se=s(Y);Ut(se,{get fighter(){return e(y)},id:"fighter2-info"}),$((we,de)=>{xt(x,`background: ${we??""}`),xt(Y,`background: ${de??""}`)},[()=>(e(f),o(()=>e(f)?Ie(e(f).archetype):"var(--card-bg)")),()=>(e(y),o(()=>e(y)?Ie(e(y).archetype):"var(--card-bg)"))]),D(u,p)};oe(Qe,u=>{e(O)&&u(ue)})}var Ne=d(Qe,2);{var et=u=>{var p=yi(),x=s(p),I=s(x);Et(I,()=>(e(l),e(c),e(J),o(()=>`${e(l)}-${e(c)}-${e(J).length}`)),we=>{{let de=yt(()=>(M(Pt),o(Pt)));Ht(we,{title:"Fight Radar",chartId:"fight-radar",get categories(){return e(de)},get series(){return e(J)},isIQRadar:!1})}});var Y=d(x,2),se=s(Y);Et(se,()=>(e(l),e(c),e(ae),o(()=>`${e(l)}-${e(c)}-${e(ae).length}`)),we=>{{let de=yt(()=>(M(Lt),o(Lt)));Ht(we,{title:"IQ Radar",chartId:"iq-radar",get categories(){return e(de)},get series(){return e(ae)},isIQRadar:!0})}}),D(u,p)};oe(Ne,u=>{e(U),e(J),o(()=>e(U)&&e(J).length>0)&&u(et)})}var st=d(Ne,2);_i(st,{get fighter1(){return e(f)},get fighter2(){return e(y)}});var ot=d(st,2);Ba(ot,{}),D(j,qe),pt(),h()}export{Si as default};

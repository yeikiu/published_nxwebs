import{ap as ge,ab as Be,aq as Le,ar as Ce,as as Oe}from"./lucide-CB1ASeIu.js";import{$ as Se,a as Ie}from"./index-UfpiCvG-.js";function nt(){const t=ge(Se)("charts.fight_radar_categories");return Array.isArray(t)?t:["Striking Offense","Striking Defense","Takedown Offense","Takedown Defense","Control","Finish Threat"]}function ot(){const t=ge(Se)("charts.iq_radar_categories");return Array.isArray(t)?t:["Distance","Adaptability","Composure","Decisions","Rhythm","Feints"]}function Pe(e){const t=Number(e.Sig_Strikes_Landed)||0,i=Number(e.Sig_Strikes_Thrown)||0,s=Number(e.Sig_Strikes_Absorbed)||0,n=Number(e.significant_strikes_attempted_against)||0,o=Number(e.Takedowns_Successful)||0,r=Number(e.Takedowns_Attempted)||0,c=Number(e.Takedowns_Defended)||0,a=Number(e.takedowns_attempted_against)||0,l=Number(e.Control_Time_Seconds)||0,h=Number(e.Time_Controlled_Seconds)||0,u=Number(e.Number_of_Fights_36m)||1,T=Number(e.win_ko)||0,g=Number(e.win_tko)||0,_=Number(e.win_sub)||0;let m=i>0?t/i*100:0,d=n>0?(n-s)/n*100:85,f=r>0?o/r*100:45,F=a>0?c/a*100:85,A=l+h>0?l/(l+h)*100:50,k=u>0?(T+g+_)/u*100:0;const p={STR_OFF:m,STR_DEF:d,TD_OFF:f,TD_DEF:F,CTRL:A,FIN_THREAT:k};return{STR_OFF:p.STR_OFF>100?100:Math.round(p.STR_OFF),STR_DEF:p.STR_DEF>100?100:Math.round(p.STR_DEF),TD_OFF:p.TD_OFF>100?100:Math.round(p.TD_OFF),TD_DEF:p.TD_DEF>100?100:Math.round(p.TD_DEF),CTRL:p.CTRL>100?100:Math.round(p.CTRL),FIN_THREAT:p.FIN_THREAT>100?100:Math.round(p.FIN_THREAT)}}function Ke(e,t){const i=e.Sig_Strikes_Landed||0,s=e.Sig_Strikes_Thrown||0,n=e.Sig_Strikes_Absorbed||0,o=e.significant_strikes_attempted_against||0,r=e.Takedowns_Defended||0,c=e.takedowns_attempted_against||0,a=e.Fight_Duration_Seconds||1,l=e.win||0,h=e.loss||0,u=e.draws||0,T=e.win_ko||0,g=e.win_tko||0,_=e.win_sub||0,m=e.Knockdowns||0,d=e.Knockdowns_Received||0,f=a/60,F=l+h+u||1,A=f>0?i/(f*F):0,k=s>0?i/s*100:0,p=o>0?n/o*100:0,N=c>0?r/c*100:0,v=l/F,L=(T+g+_)/F*100,w=e.reach_inches||70,b=e.height_inches||70,C=w-b,O=Math.min(Math.max(C-2,0),10)*4,G=i-n,q=G>0?Math.min(G*.3,40):Math.max(G*.2,-20),I=40+O+q,Q=Math.round(Math.min(Math.max(I,15),85)),S=(p+N)/2-n/Math.max(F,1),j=Math.max(S*.8,0),E=f*F,z=E>10?Math.min((E-10)*2,25):0,Y=F-d,J=Math.min(Y*3,20),Z=40+j+z+J,K=Math.round(Math.min(Math.max(Z,20),85)),X=Math.min(v*.4,.4),W=((T>0?1:0)+(g>0?1:0)+(_>0?1:0))/3*.15;let M=0;t.isTriple?M=.25:t.isDual?M=.15:M=-.1;const V=X+W+M,ee=Math.round(Math.min(Math.max(V*100,5),95)),y=v>L/100?Math.min((v-L/100)*50,25):0,te=e.Takedowns_Attempted>0?e.Takedowns_Successful/e.Takedowns_Attempted*30:15,se=e.Control_Time_Seconds||0,ie=e.Time_Controlled_Seconds||0,B=se-ie,U=B>0?Math.min(B*.15,20):Math.max(B*.1,-15),ne=35+y+te+U,oe=Math.round(Math.min(Math.max(ne,15),85)),re=s-n,ce=re>0?Math.min(re*.25,30):0,x=f*F,ae=x<8?Math.min((8-x)*5,25):x>12?Math.max((12-x)*2,-15):10,_e=A>3?Math.min((A-3)*8,20):A*6,le=35+ce+ae+_e,he=Math.round(Math.min(Math.max(le,15),85)),me=s>0?k/100:0,ye=me>.5?Math.min((me-.5)*80,30):0,de=m-d,Re=de>0?Math.min(de*15,25):Math.max(de*5,-15),we=B>60?Math.min((B-60)*.1,15):0,be=35+ye+Re+we,Ee=Math.round(Math.min(Math.max(be,15),85));return{distance:Q,adaptability:ee,composure:K,decisions:oe,rhythm:he,feints:Ee}}class Me{constructor(t){this.metrics=this.calculateMetrics(t)}calculateMetrics(t){const i=t.win||0,s=t.loss||0,n=t.draws||0,o=i+s+n,r=t.win_ko||0,c=t.win_tko||0,a=t.win_sub||0,l=t.Knockdowns||0,h=t.Knockdowns_Received||0,u=s===0&&i>0,T=o>0?i/o:0,g=r+c+a,_=o>0?g/o*100:0,m=h>0?l/h:l+1,d=t.Fight_Duration_Seconds>0?t.Fight_Duration_Seconds/60:15;return{isUndefeated:u,wins:i,losses:s,winRate:T,finishRate:_,totalFights:t.Number_of_Fights_36m||o,knockdowns:l,knockdownsReceived:h,knockdownRatio:m,subWins:a,koTkoWins:r+c,avgFightTime:d,isEliteFinisher:_>70&&o>=4,isSubmissionSpecialist:a>=3&&u,isKnockoutArtist:r+c>=3&&l>h+2}}getStrikingOffenseBonuses(){const t=this.metrics;return t.isUndefeated&&t.isEliteFinisher?{primary:t.isKnockoutArtist?1.44:1.25,secondary:1.15,additive:8}:t.isUndefeated&&t.finishRate>50?{primary:1.18,secondary:1.1,additive:5}:t.isUndefeated&&t.totalFights>=3?{primary:1.12,secondary:1.05,additive:3}:t.winRate>.85&&t.totalFights>=5?{primary:1.08,secondary:1.03,additive:2}:{primary:1,secondary:1,additive:0}}getDefensiveBonuses(){const t=this.metrics;return t.winRate===1&&t.totalFights>=4?{primary:1.15,secondary:1.1,additive:4}:t.winRate>.9&&t.totalFights>=4?{primary:1.08,secondary:1.05,additive:2}:{primary:1,secondary:1,additive:0}}getFinishingBonuses(){const t=this.metrics;return t.isUndefeated&&t.isEliteFinisher?{primary:t.isSubmissionSpecialist?1.68:1.4,secondary:1.2,additive:15}:t.isUndefeated&&t.finishRate>50?{primary:1.3,secondary:1.15,additive:10}:t.isUndefeated&&t.totalFights>=3?{primary:1.2,secondary:1.1,additive:6}:{primary:1,secondary:1,additive:0}}getControlBonuses(){const t=this.metrics;return t.isSubmissionSpecialist?{primary:1.25,secondary:1.15,additive:8}:t.isUndefeated&&t.totalFights>=4?{primary:1.1,secondary:1.05,additive:3}:{primary:1,secondary:1,additive:0}}getVolumeBonuses(){const t=this.metrics;if(t.isUndefeated&&t.isEliteFinisher){let i=1.4,s=30;return t.isKnockoutArtist&&(i*=1.15,s+=12),t.isSubmissionSpecialist&&(i*=1.18,s+=15),{primary:Math.min(i,1.8),secondary:1.18,additive:Math.min(s,50)}}else{if(t.isUndefeated&&t.finishRate>50)return{primary:1.25,secondary:1.12,additive:20};if(t.isUndefeated&&t.totalFights>=3)return{primary:1.15,secondary:1.08,additive:15}}return{primary:1,secondary:1,additive:0}}getEliteClassification(){const t=this.metrics;return t.isUndefeated&&t.isEliteFinisher?t.isKnockoutArtist&&t.isSubmissionSpecialist?"Complete Dominator":t.isKnockoutArtist?"Knockout Artist":t.isSubmissionSpecialist?"Submission Specialist":"Elite Finisher":t.isUndefeated&&t.finishRate>50?"Undefeated Finisher":t.isUndefeated?"Undefeated Prospect":t.winRate>.85&&t.totalFights>=6?"Elite Veteran":"Standard Fighter"}getMetrics(){return{...this.metrics}}}function We(e,t){let i=null,s=null;if(xe(e))i="AT",s=R[i];else{const ne=t.map(he=>pe(he)),oe=Math.round($(ne)),ce=pe(e)>=oe?"A":"P",x=t.map(ue),ae=Math.round($(x)),le=ue(e)>=ae?"T":"NT";i=`${ce}${le}`,s=R[i]}const n=t.map(fe),o=Math.round($(n)),r=Math.min(...n),c=Math.max(...n),a=(r+o)/2,l=(o+c)/2,h=fe(e),u=h>=o?"A":"P";let T="Muy Bajo";h>=l?T="Muy Alto":h>=o?T="Medio-Alto":h>=a&&(T="Medio-Bajo");const g=t.map(H),_=Math.round($(g)),m=Math.min(...g),d=Math.max(...g),f=(m+_)/2,F=(_+d)/2,A=H(e),k=A>=_?"T":"NT";let p="Muy Bajo";A>=F?p="Muy Alto":A>=_?p="Medio-Alto":A>=f&&(p="Muy Bajo");let N=T==="Muy Alto"&&p==="Medio-Bajo"||T==="Medio-Alto"&&p==="Muy Alto"||T==="Medio-Bajo"&&p==="Medio-Alto"||T==="Muy Bajo"&&p==="Muy Bajo";const v=`${u}${k}`,L=R[v];N=N&&i!==v;const w=t.map(Ae),b=Math.round($(w)),C=Math.min(...w),O=Math.max(...w),G=(C+b)/2,q=(b+O)/2,I=Ae(e),Q=I>=b?"A":"P";let S="Muy Bajo";I>=q?S="Muy Alto":I>=b?S="Medio-Alto":I>=G&&(S="Medio-Bajo");const j=t.map(Fe),E=Math.round($(j)),z=Math.min(...j),Y=Math.max(...j),J=(z+E)/2,Z=(E+Y)/2,K=Fe(e),X=K>=E?"T":"NT";let P="Muy Bajo";K>=Z?P="Muy Alto":K>=E?P="Medio-Alto":K>=J&&(P="Muy Bajo");let W=S==="Muy Bajo"&&P==="Medio-Bajo"||S==="Medio-Bajo"&&P==="Muy Alto"||S==="Medio-Alto"&&P==="Medio-Alto"||S==="Muy Alto"&&P==="Muy Bajo";const M=`${Q}${X}`,V=R[M];W=W&&![i,v].includes(M);const ee=`${s}${N?L:""}${W?V:""}`,y=`${i}${N?`+${v}`:""}${W?`+${M}`:""}`,te=`@ARCHETYPE_${y}_DESCRIPTION`,se=`@ARCHETYPE_${y}_FAVORITE_ZONE`,ie=`@ARCHETYPE_${y}_STRENGTHS`,B=`@ARCHETYPE_${y}_WEAKNESSES`,U=y.split("+").length;return{combinedRole:y,inTransition:U>1,isDual:U===2,isTriple:U===3,archetypeEmojis:ee,description:te,favoriteZone:se,strengths:ie,weaknesses:B}}function pe(e){const t=e.Sig_Strikes_Thrown||0,i=e.Takedowns_Attempted||0,s=e.Sub_Attempts||0,n=e.Control_Time_Seconds||0,r=(e.Fight_Duration_Seconds||1)/60,c=r>0?n/r:0,a=30,l=.25,h=c>a?6:7,u=c/h,T=t+i+s+u,g=r>0?T/r:0,_=ue(e),m=H(e);let d=g*.35+_*.35+m*.3;const f=n/(t+n+1);if(f>l*1.5&&c>a*1.2){const k=Math.max(0,c/a-1),p=Math.max(0,f/l-1),N=(k+p)*2.5;d+=N}if(_>60){const k=1+(_-60)/200;d*=k}if(r<6&&m>60){const k=(6-r)/6*(m/100)*10;d+=k}const A=new Me(e).getVolumeBonuses();return d=(d+A.additive)*A.primary,Math.round(d*100)/100}function ue(e){const t=e.Sig_Strikes_Landed||0,i=e.Sig_Strikes_Thrown||0,s=e.Takedowns_Successful||0,n=e.Takedowns_Attempted||0,r=H(e)>50,c=r?.9:.85,a=r?.1:.15,l=i>0?t/i*100:0,h=n>0?s/n*100:0;let u=0;if(i>0&&n>0)u=l*c+h*a;else if(i>0)u=l;else if(n>0)u=h;else return 50;const T=e.loss_ko||0,g=e.loss_tko||0,_=e.loss_sub||0,m=e.Knockdowns_Received||0,d=e.Number_of_Fights_36m,f=d>0?(T+g+_)/d:0,F=d>0?m/d:0,A=(e.Fight_Duration_Seconds||300)/60,k=e.significant_strikes_attempted_against>0?(e.significant_strikes_attempted_against-e.Sig_Strikes_Absorbed)/e.significant_strikes_attempted_against:.6,N=A>8&&k>.6?.6:1,v=Math.min(f*1*N,.45),L=Math.min(F*.4*N,.15),w=Math.min(v+L,.55),C=new Me(e).getStrikingOffenseBonuses();if(u=(u+C.additive)*C.primary,u=u*(1-w),u>55){const O=(u-55)/45*10;u+=O}return Math.min(Math.round(u),100)}function H(e){const t=e.win||0,i=e.loss||0,s=e.draws||0,n=e.win_ko||0,o=e.win_tko||0,r=e.win_sub||0,c=t+i+s;if(c===0)return 0;let a=(n+o+r)/c*100;const l=n+o+r,h=c>0?t/c:0,u=e.Fight_Duration_Seconds>0?e.Fight_Duration_Seconds/60:15;if(u<8&&a>30){const d=Math.min((8-u)*2,8);a+=d}const T=(n>0?1:0)+(o>0?1:0)+(r>0?1:0);if(T>=2&&l>=3){const d=T*2;a+=d}const g=c>0?(n+o)/c*100:0;if(g>40){const d=Math.min((g-40)*.15,6);a+=d}const _=c>0?r/c*100:0,m=c>0?e.Sub_Attempts/c:0;if(_>20||m>1.5){const d=Math.min(_*.1+m,4);a+=d}if(h>.85&&c>=5){const d=Math.min((h-.85)*20,3);a+=d}if(e.reach_inches>72&&e.height_inches>70){const d=Math.min((e.reach_inches-72)*.1,2);a+=d}return Math.min(a,100)}function fe(e){const t=e.Knockdowns||0,i=e.Knockdowns_Received||0,s=e.Number_of_Fights_36m||1,o=(t+i)/s;let r=(1-Math.exp(-o*1.5))*100;const c=e.win||0;e.loss;const a=e.win_ko||0,l=e.win_tko||0,h=i>0?t/i:t+1;if(t>i&&t>0){const d=Math.min(h*4,12);r+=d}const u=a+l;if(u>0&&s>0){const d=u/s,f=Math.min(d*15,10);r+=f}const T=s>0?e.Sig_Strikes_Thrown/s:0;if(T>100&&t>s*.3){const d=Math.min((T-100)*.03,5);r+=d}const g=s>0?e.Sig_Strikes_Absorbed/s:0,_=s>0?c/s:0;if(g>80&&_>.7&&i<s){const d=Math.min((g-80)*.02,3);r+=d}const m=s>0?(a+l+e.win_sub)/s:0;if(m>.4&&t>=s*.2){const d=Math.min(m*8,6);r+=d}return Math.min(Math.ceil(r*100)/100,100)}function Ae(e){const i=(e.Fight_Duration_Seconds||0)/60;return Math.round(i*100)/100}function Fe(e){const t=e.Control_Time_Seconds||0,i=e.Time_Controlled_Seconds||0,s=e.Number_of_Fights_36m||1,n=(t+i)/s,o=e.Fight_Duration_Seconds||300,r=n/o*100;return Math.min(Math.round(r*100)/100,100)}const $=e=>{const t=[...e].sort((s,n)=>s-n),i=Math.floor(t.length/2);return t.length%2!==0?t[i]:(t[i-1]+t[i])/2};function xe(e){const{win:t,loss:i,Number_of_Fights_36m:s}=e;if(s<3)return!1;const n=s>0?t/s:0,o=H(e)/100,r=(e.Fight_Duration_Seconds||300)/60,c=(i||0)===0&&t>0,a=Pe(e),l=(a.STR_DEF+a.TD_DEF)/2,h=[],u=n>=.75&&o>=.6&&r<=8;h.push(u);const T=c&&t>=5&&(o>=.4||l>=75)&&r<=10;h.push(T);const g=t>0?(e.win_ko+e.win_tko)/t:0,_=(e.Knockdowns_Received||0)>0?(e.Knockdowns||0)/(e.Knockdowns_Received||1):(e.Knockdowns||0)+1,m=n>=.7&&g>=.5&&_>=2&&a.STR_DEF>=70;h.push(m);const d=e.Sig_Strikes_Thrown>0?e.Sig_Strikes_Landed/e.Sig_Strikes_Thrown:0,f=e.Takedowns_Attempted>0?e.Takedowns_Successful/e.Takedowns_Attempted:0,F=n>=.8&&d>=.45&&(f>=.4||e.Takedowns_Attempted<3)&&l>=70&&o>=.35;h.push(F);const A=s>=6,k=e.Sig_Strikes_Absorbed/Math.max(e.Number_of_Fights_36m,1)<60,p=A&&n>=.85&&k&&(o>=.3||l>=80);return h.push(p),h.some(v=>v)}function $e(e){return Math.round(Object.values(e).reduce((t,i)=>t+i,0)/6)}function Ge(e){const t=e.win||0,i=e.loss||0,s=e.Number_of_Fights_36m||0,n=(e.win_ko||0)+(e.win_tko||0)+(e.win_sub||0),r=(e.Career_Record||"0-0-0").split("-"),c=parseInt(r[0])||0,a=parseInt(r[1])||0,l=c+a;let h=0;return s>=4&&t>=4&&i===0&&l>=15?h=12:s>=4&&t>=3&&i<=1&&l>=12?h=10:s>=3&&t>=3&&l>=20&&c>=15?h=8:s>=3&&t>=2&&i<=1&&n>=2?h=6:s>=3&&t>=2&&l>=10&&(h=4),h}function je(e,t,i){const s=Object.values(e).reduce((r,c)=>r+c,0)/6,n=Object.values(t).reduce((r,c)=>r+c,0)/6;let o=Math.round(s*.6+n*.4);if(i){const r=i.win||0,c=(i.win_ko||0)+(i.win_tko||0)+(i.win_sub||0),l=(r>0?c/r:0)*8;o+=l;const h=Ge(i);if(o+=h,i.Number_of_Fights_36m<3)o=Math.min(o,65);else if(i.Number_of_Fights_36m===3){o=Math.min(o,70);const u=i.win||0,T=i.loss||0,g=i.draws||0,_=u+T+g,m=(i.Career_Record||"0-0-0").split("-").reduce((d,f)=>d+parseInt(f)||0,0);if(_>=3&&m>=8){const d=u/_;d>=.9?o+=6:d>=.8?o+=4:d>=.7&&(o+=2)}}else if(i.Number_of_Fights_36m>=4){const u=i.win||0,T=i.loss||0,g=i.draws||0,_=u+T+g;if(_>=4){const m=u/_;m>=.9?o+=12:m>=.8?o+=8:m>=.7?o+=5:m>=.6&&(o+=2)}}}return Math.max(0,Math.min(100,Math.round(o)))}function Ue(e){return Math.round(Object.values(e).reduce((t,i)=>t+i,0)/6)}function Te(e){return e<25?1:e<35?1.5:e<45?2:e<55?2.5:e<65?3:e<75?3.5:e<85?4:e<95?4.5:5}function De(e,t){if(t===0)return Te(e);let i;t<5?i=.7+t*.06:i=Math.min(1.6,1+(t-5)*.12);const s=e*i;return Te(s)}function He(e){const t=e.trim().split(`
`),i=t[0].split(",").map(n=>n.replace(/"/g,"").trim()),s=[];for(let n=1;n<t.length;n++){const o=qe(t[n]);if(o.length!==i.length){console.warn(`Línea ${n+1} tiene ${o.length} campos, esperados ${i.length}`);continue}const r={};i.forEach((a,l)=>{r[a]=o[l]});const c=Qe(r);c&&s.push(c)}return s}function qe(e){const t=[];let i="",s=!1;for(let n=0;n<e.length;n++){const o=e[n];o==='"'?s=!s:o===","&&!s?(t.push(i.trim()),i=""):i+=o}return t.push(i.trim()),t}function Qe(e){try{const t=e.Division,i=e.Fighter;if(!t||!i)return null;const s=i.replace(/"/g,"");return{id:e.ufcstats_url&&e.ufcstats_url.split("/").pop()||"",Fighter:s,cleanName:Ze(s),Division:t,Career_Record:e.Career_Record||"",Sig_Strikes_Thrown:parseFloat(e.Sig_Strikes_Thrown)||0,Sig_Strikes_Landed:parseFloat(e.Sig_Strikes_Landed)||0,Sig_Strikes_Absorbed:parseFloat(e.Sig_Strikes_Absorbed)||0,Takedowns_Attempted:parseFloat(e.Takedowns_Attempted)||0,Takedowns_Successful:parseFloat(e.Takedowns_Successful)||0,Takedowns_Defended:parseFloat(e.Takedowns_Defended)||0,Sub_Attempts:parseFloat(e.Sub_Attempts)||0,Sub_Attempts_Defended:parseFloat(e.Sub_Attempts_Defended)||0,Knockdowns:parseFloat(e.Knockdowns)||0,Knockdowns_Received:parseFloat(e.Knockdowns_Received)||0,Control_Time_Seconds:parseFloat(e.Control_Time_Seconds)||0,Time_Controlled_Seconds:parseFloat(e.Time_Controlled_Seconds)||0,height_inches:parseFloat(e.height_inches)||0,reach_inches:parseFloat(e.reach_inches)||0,win:parseFloat(e.win)||0,loss:parseFloat(e.loss)||0,draws:parseFloat(e.draws)||0,win_ko:parseFloat(e.win_ko)||0,win_tko:parseFloat(e.win_tko)||0,win_sub:parseFloat(e.win_sub)||0,win_decision:parseFloat(e.win_decision)||0,loss_ko:parseFloat(e.loss_ko)||0,loss_tko:parseFloat(e.loss_tko)||0,loss_sub:parseFloat(e.loss_sub)||0,loss_decision:parseFloat(e.loss_decision)||0,Fight_Duration_Seconds:parseFloat(e.Fight_Duration_Seconds)||1,significant_strikes_attempted_against:parseFloat(e.significant_strikes_attempted_against)||0,takedowns_attempted_against:parseFloat(e.takedowns_attempted_against)||0,takedowns_allowed:parseFloat(e.takedowns_allowed)||0,submission_attempts_against:parseFloat(e.submission_attempts_against)||0,Number_of_Fights_36m:parseFloat(e.Number_of_Fights_36m)||0,Dates_36m:e.Dates_36m||"",picture_url:e.picture_url||"",ufcstats_url:e.ufcstats_url||""}}catch(t){return console.error("Error procesando luchador:",e.Fighter||e.Name,t),null}}async function ze(e){const t=await fetch(e);if(!t.ok)throw new Error(`No se pudo cargar ${e}: ${t.status}`);return await t.text()}class Ye{constructor(){this.allRawFightersArr=[],this.allRawFightersDataMap=new Map,this.allRawFightersByDivision=new Map,this.processedFightersMap=new Map,this.processedFighters=[],this.knownDivisions=new Set,this.cacheKey="ufc_radar_fighters_cache",this.cacheExpiryHours=24,this.fightersProcessed=!1}saveToLocalStorage(t){try{localStorage.setItem(this.cacheKey,JSON.stringify(t))}catch(i){console.warn("Failed to save data to localStorage:",i)}}loadFromLocalStorage(){try{const t=localStorage.getItem(this.cacheKey);if(!t)return null;const i=JSON.parse(t),n=Date.now()-i.timestamp,o=this.cacheExpiryHours*60*60*1e3;return n>o?(localStorage.removeItem(this.cacheKey),null):i}catch(t){return console.warn("Failed to load data from localStorage:",t),localStorage.removeItem(this.cacheKey),null}}populateFromCache(t){this.allRawFightersArr=t.allRawFightersArr,this.allRawFightersDataMap.clear(),this.allRawFightersArr.forEach(i=>{this.allRawFightersDataMap.set(i.Fighter,i)}),this.allRawFightersByDivision.clear(),Object.entries(t.allRawFightersByDivision).forEach(([i,s])=>{this.allRawFightersByDivision.set(i,s)}),this.knownDivisions.clear(),t.knownDivisions.forEach(i=>{this.knownDivisions.add(i)}),this.processedFighters=[],this.processedFightersMap.clear(),this.allRawFightersByDivision.forEach((i,s)=>{i.forEach(n=>{const o=this.getFighterAppData(n,i);o&&(this.processedFighters.push(o),this.processedFightersMap.set(o.nameWithNickname,o))})}),this.processedFighters.sort((i,s)=>s.stars!==i.stars?s.stars-i.stars:s.overall-i.overall)}async loadFightersFromCSV(){if(this.allRawFightersDataMap.size>0&&this.fightersProcessed)return{allRawFightersArr:this.allRawFightersArr,allRawFightersDataMap:this.allRawFightersDataMap,allRawFightersByDivision:this.allRawFightersByDivision,processedFightersMap:this.processedFightersMap,processedFighters:this.processedFighters};const t=this.loadFromLocalStorage();if(t&&this.fightersProcessed)return console.log("Loading fighters from localStorage cache"),this.populateFromCache(t),{allRawFightersArr:this.allRawFightersArr,allRawFightersDataMap:this.allRawFightersDataMap,allRawFightersByDivision:this.allRawFightersByDivision,processedFightersMap:this.processedFightersMap,processedFighters:this.processedFighters};try{const i=await ze("data/ALL_DIVISIONS_DATA_WITH_URLS.csv");this.allRawFightersArr=He(i),this.allRawFightersArr.forEach(r=>{this.allRawFightersDataMap.has(r.Fighter)||this.allRawFightersDataMap.set(r.Fighter,r),this.allRawFightersByDivision.has(r.Division)?this.allRawFightersByDivision.get(r?.Division)?.push(r):this.allRawFightersByDivision.set(r.Division,[r])}),this.allRawFightersByDivision.forEach((r,c)=>{r.forEach(a=>{const l=this.getFighterAppData(a,r);l&&(this.processedFighters.push(l),this.processedFightersMap.set(l.nameWithNickname,l))})}),this.processedFighters.forEach(r=>{const c=Je(r.rawData.Dates_36m);if(c.length>0){const a=[];c.forEach(l=>{const h=this.getFighterById(l.fighterId);h&&l.result&&a.push({opponent:{overall:h.overall},result:l.result,method:void 0,monthsAgo:l.monthsAgo})}),r.oppTierScore=tt(a)}else r.oppTierScore=0}),this.processedFighters.forEach(r=>{r.stars=De(r.overall,r.oppTierScore)}),this.processedFighters.sort((r,c)=>c.stars!==r.stars?c.stars-r.stars:c.overall-r.overall);const s=new Map,n=new Map;this.processedFighters.forEach(r=>{s.set(r.nameWithNickname,r.stars),n.set(r.nameWithNickname,r.overall)}),this.allRawFightersArr.sort((r,c)=>{const a=s.get(r.Fighter)??0,l=s.get(c.Fighter)??0,h=n.get(r.Fighter)??0,u=n.get(c.Fighter)??0;return l!==a?l-a:u-h}),this.allRawFightersByDivision.forEach((r,c)=>{r.sort((a,l)=>{const h=s.get(a.Fighter)??0,u=s.get(l.Fighter)??0,T=n.get(a.Fighter)??0,g=n.get(l.Fighter)??0;return u!==h?u-h:g-T})}),this.knownDivisions.clear(),this.allRawFightersArr.forEach(r=>{const c=r.Division.toLowerCase();this.knownDivisions.add(c),this.knownDivisions.add(c.replace(/ /g,"_")),this.knownDivisions.add(c.replace(/women's\s+/g,"w_")),this.knownDivisions.add(c.replace(/w_/g,"women's "))});const o={timestamp:Date.now(),allRawFightersArr:this.allRawFightersArr,allRawFightersByDivision:Object.fromEntries(this.allRawFightersByDivision),knownDivisions:Array.from(this.knownDivisions)};return this.saveToLocalStorage(o),console.log("Saved fighters data to localStorage cache"),this.fightersProcessed=!0,{allRawFightersArr:this.allRawFightersArr,allRawFightersDataMap:this.allRawFightersDataMap,allRawFightersByDivision:this.allRawFightersByDivision,processedFightersMap:this.processedFightersMap,processedFighters:this.processedFighters}}catch(i){return console.error("Error loading fighters:",i),{allRawFightersArr:this.allRawFightersArr,allRawFightersDataMap:this.allRawFightersDataMap,allRawFightersByDivision:this.allRawFightersByDivision,processedFightersMap:this.processedFightersMap,processedFighters:this.processedFighters}}}calculateSyntheticFighter(t,i){return this.getFighterAppData(t,i)}getFighterAppData(t,i){try{const s=Pe(t),n=We(t,i),o=Ke(t,n),r=je(s,o,t),c=Te(r);return{id:t.id,name:t.cleanName,nameWithNickname:t.Fighter,division:t.Division,career_record:t.Career_Record||"TBD",pictureUrl:t.picture_url||"",ufcstats_url:t.ufcstats_url||"",fightRadar:s,iqRadar:o,archetype:n,stars:c,performance:$e(s),overall:r,fightIQ:Ue(o),oppTierScore:0,rawData:t}}catch(s){return console.error("Error processing fighter:",t.Fighter,s),null}}async getDashboardStats(){const t=this.allRawFightersArr,i=t.filter(g=>g.Number_of_Fights_36m>0),s=t.filter(g=>g.Number_of_Fights_36m===0),n={};t.forEach(g=>{const _=g.Division||"Catchweight";n[_]=(n[_]||0)+1});const o=i.length>0?i.reduce((g,_)=>g+_.Number_of_Fights_36m,0)/i.length:0,r=t.filter(g=>g.Number_of_Fights_36m>0).sort((g,_)=>_.Number_of_Fights_36m-g.Number_of_Fights_36m).slice(0,10),a=t.filter(g=>!g.picture_url||g.picture_url.trim()==="").length,l=t.length>0?Math.round(a/t.length*100*10)/10:0,h=await this.getArchetypeBreakdown(this.processedFighters),u=await this.getTopRatedFighters(this.processedFighters),T=await this.getTop100Fighters(this.processedFighters);return{totalFighters:t.length,activeFighters:i.length,inactiveFighters:s.length,divisionBreakdown:n,avgFightsLast36m:Math.round(o*10)/10,recentActivity:r,missingPictureCount:a,missingPictureRatio:l,archetypeBreakdown:h,topRatedFighters:u,top100Fighters:T}}async searchFighters(t,i=20){const s=this.allRawFightersArr,n=t.toLowerCase(),o=n.replace(/ /g,"_"),r=n.replace(/women's\s+/g,"w_"),c=n.replace(/w_/g,"women's "),a=this.knownDivisions.has(n)||this.knownDivisions.has(o)||this.knownDivisions.has(r)||this.knownDivisions.has(c),l=s.filter(h=>{const u=h.Fighter.toLowerCase(),T=h.Division.toLowerCase();return a?T===n||T===o||T===r||T===c:ve(u).includes(ve(n))||T.includes(n)||T.includes(o)||T.includes(r)||T.includes(c)});return a?l:l.slice(0,i)}async getArchetypeBreakdown(t){const i={single:0,dual:0,triple:0,total:0};return t.forEach(({archetype:s})=>{s.isTriple?i.triple++:s.isDual?i.dual++:i.single++,i.total++}),{single:i.single,dual:i.dual,triple:i.triple,total:i.total}}async getTopRatedFighters(t){const i=[],s=t.reduce((n,o)=>{const r=o.division;return n[r]||(n[r]=[]),n[r].push(o),n},{});for(const[n,o]of Object.entries(s)){let r=null;for(const c of o)try{const a={name:c.name,nameWithNickname:c.nameWithNickname,division:n,stars:c.stars,overall:c.overall,record:c.career_record,archetypeDisplay:D(c.archetype),activity:c.rawData.Number_of_Fights_36m||0};(!r||a.stars>r.stars||a.stars===r.stars&&a.overall>r.overall||a.stars===r.stars&&a.overall===r.overall&&a.activity>r.activity)&&(r=a)}catch(a){console.warn(`Error processing fighter ranking for ${c.name}:`,a)}r&&i.push(r)}return i.sort((n,o)=>o.stars!==n.stars?o.stars-n.stars:o.overall!==n.overall?o.overall-n.overall:o.activity-n.activity)}async getTop100Fighters(t){const i=[];for(const s of t)try{i.push({name:s.name,nameWithNickname:s.nameWithNickname,division:s.division,stars:s.stars,overall:s.overall,record:s.career_record,archetypeDisplay:D(s.archetype),activity:s.rawData.Number_of_Fights_36m||0})}catch(n){console.warn(`Error processing fighter ranking for ${s.name}:`,n)}return i.sort((s,n)=>n.stars!==s.stars?n.stars-s.stars:n.overall!==s.overall?n.overall-s.overall:n.activity-s.activity).slice(0,100)}async getFightersByArchetypeType(t="all"){const i=[];for(const s of this.processedFighters)try{const n=D(s.archetype);(t==="all"||t==="single"&&!s.archetype.inTransition||t==="dual"&&s.archetype.isDual||t==="triple"&&s.archetype.isTriple)&&i.push({name:s.name,nameWithNickname:s.nameWithNickname,division:s.division,stars:s.stars,overall:s.overall,record:s.career_record,archetypeDisplay:n,activity:s.rawData.Number_of_Fights_36m||0})}catch(n){console.warn(`Error processing fighter for archetype filter ${s.name}:`,n)}return i.sort((s,n)=>n.stars!==s.stars?n.stars-s.stars:n.overall!==s.overall?n.overall-s.overall:n.activity-s.activity)}async getFightersByExactArchetype(t="all"){const i=[];for(const s of this.processedFighters)try{const n=D(s.archetype);(t==="all"||s.archetype.combinedRole===t)&&i.push({name:s.name,nameWithNickname:s.nameWithNickname,division:s.division,stars:s.stars,overall:s.overall,record:s.career_record,archetypeDisplay:n,activity:s.rawData.Number_of_Fights_36m||0})}catch(n){console.warn(`Error processing fighter for exact archetype filter ${s.name}:`,n)}return i.sort((s,n)=>n.stars!==s.stars?n.stars-s.stars:n.overall!==s.overall?n.overall-s.overall:n.activity-s.activity)}async getAvailableArchetypes(){const t=new Set,i=[];i.push({value:"all",label:"All Fighters",iconComponent:Be},{value:"single",label:"Single Role",iconComponent:Le},{value:"dual",label:"Dual Role",iconComponent:Ce},{value:"triple",label:"Triple Role",iconComponent:Oe});for(const n of this.processedFighters)t.add(n.archetype.combinedRole);const s=Array.from(t).sort();for(const n of s){const o=this.processedFighters.find(r=>r.archetype.combinedRole===n);if(o){const r=D(o.archetype);i.push({value:n,label:`${r.label} ${n} (${r.name})`})}}return i}async getFightersByFilter(t){return["all","single","dual","triple"].includes(t)?this.getFightersByArchetypeType(t):this.getFightersByExactArchetype(t)}getRawFighterDataById(t){return this.allRawFightersArr.find(s=>s.id===t)||null}getFighterById(t){return this.processedFighters.find(s=>s.id===t)||null}}const ke=new Ye,R={AT:"🔴",ANT:"🟡",PT:"🔵",PNT:"🟢"};function Ne(e){const t=ge(Ie)||"es",i={en:{AT:"The Strategist",ANT:"The Predator",PT:"The Sniper",PNT:"The Shield","ANT+AT":"The Whirlwind","AT+ANT":"The Hurricane","AT+PNT":"The Guardian","AT+PT":"The Surgeon","PNT+AT":"The Technical Bastion","PT+AT":"The Pulse Master","ANT+PNT":"The Beast","ANT+PT":"The Punisher","PNT+ANT":"The Feral","PT+ANT":"The Silent Demolisher","PNT+PT":"The Anchor","PT+PNT":"The Wall","ANT+AT+PNT":"The Center Colossus","ANT+AT+PT":"The Wild Strategist","ANT+PNT+AT":"","ANT+PT+AT":"The Incursor","AT+ANT+PNT":"The Unbreakable","AT+ANT+PT":"The Chaos Architect","AT+PNT+ANT":"The Technical Lion","AT+PNT+PT":"The Wall Warrior","AT+PT+ANT":"The Rhythm Alchemist","AT+PT+PNT":"The Iron Sage","PNT+ANT+AT":"The Chaos Phoenix","PNT+AT+ANT":"The Legionnaire","PNT+AT+PT":"The Steel Sentinel","PNT+PT+AT":"The Rhythm Bastion","PT+ANT+AT":"The Combat Constructor","PT+AT+ANT":"The Tactical Strangler","PT+AT+PNT":"The Armored Tactical","PT+PNT+AT":"The Cage Monk","ANT+PNT+PT":"The Unstoppable Cyclone","ANT+PT+PNT":"The Wild Gladiator","PNT+ANT+PT":"The Iron Hammer","PNT+PT+ANT":"The Wild Colossus","PT+ANT+PNT":"The Octagon Barbarian","PT+PNT+ANT":"The Silent Titan"},es:{AT:"El Estratega",ANT:"El Depredador",PT:"El Francotirador",PNT:"El Escudo","ANT+AT":"El Vendaval","AT+ANT":"El Huracán","AT+PNT":"El Guardián","AT+PT":"El Cirujano","PNT+AT":"El Bastión Técnico","PT+AT":"El Maestro del Pulso","ANT+PNT":"La Bestia","ANT+PT":"El Castigador","PNT+ANT":"El Feral","PT+ANT":"El Demoledor Silencioso","PNT+PT":"El Ancla","PT+PNT":"La Muralla","ANT+AT+PNT":"El Coloso del Centro","ANT+AT+PT":"El Estratega Salvaje","ANT+PNT+AT":"","ANT+PT+AT":"El Incursor","AT+ANT+PNT":"El Inquebrantable","AT+ANT+PT":"El Arquitecto del Caos","AT+PNT+ANT":"El León Técnico","AT+PNT+PT":"El Guerrero del Muro","AT+PT+ANT":"El Alquimista del Ritmo","AT+PT+PNT":"El Sabio de Hierro","PNT+ANT+AT":"El Fénix del Caos","PNT+AT+ANT":"El Legionario","PNT+AT+PT":"El Centinela de Acero","PNT+PT+AT":"El Bastión del Ritmo","PT+ANT+AT":"El Constructor del Combate","PT+AT+ANT":"El Estrangulador Táctico","PT+AT+PNT":"El Táctico Blindado","PT+PNT+AT":"El Monje de la Jaula","ANT+PNT+PT":"El Ciclón Imparable","ANT+PT+PNT":"El Gladiador Salvaje","PNT+ANT+PT":"El Martillo de Hierro","PNT+PT+ANT":"El Coloso Salvaje","PT+ANT+PNT":"El Bárbaro del Octágono","PT+PNT+ANT":"El Titán Silencioso"},fr:{AT:"Le Stratège",ANT:"Le Prédateur",PT:"Le Sniper",PNT:"Le Bouclier","ANT+AT":"Le Tourbillon","AT+ANT":"L'Ouragan","AT+PNT":"Le Gardien","AT+PT":"Le Chirurgien","PNT+AT":"Le Bastion Technique","PT+AT":"Le Maître du Pouls","ANT+PNT":"La Bête","ANT+PT":"Le Punisseur","PNT+ANT":"Le Féral","PT+ANT":"Le Démolisseur Silencieux","PNT+PT":"L'Ancre","PT+PNT":"Le Mur","ANT+AT+PNT":"Le Colosse du Centre","ANT+AT+PT":"Le Stratège Sauvage","ANT+PNT+AT":"","ANT+PT+AT":"L'Incurseur","AT+ANT+PNT":"L'Incassable","AT+ANT+PT":"L'Architecte du Chaos","AT+PNT+ANT":"Le Lion Technique","AT+PNT+PT":"Le Guerrier du Mur","AT+PT+ANT":"L'Alchimiste du Rythme","AT+PT+PNT":"Le Sage de Fer","PNT+ANT+AT":"Le Phénix du Chaos","PNT+AT+ANT":"Le Légionnaire","PNT+AT+PT":"La Sentinelle d'Acier","PNT+PT+AT":"Le Bastion du Rythme","PT+ANT+AT":"Le Constructeur de Combat","PT+AT+ANT":"L'Étrangleur Tactique","PT+AT+PNT":"Le Tactique Blindé","PT+PNT+AT":"Le Moine de la Cage","ANT+PNT+PT":"Le Cyclone Imparable","ANT+PT+PNT":"Le Gladiateur Sauvage","PNT+ANT+PT":"Le Marteau de Fer","PNT+PT+ANT":"Le Colosse Sauvage","PT+ANT+PNT":"Le Barbare de l'Octogone","PT+PNT+ANT":"Le Titan Silencieux"},pt:{AT:"O Estrategista",ANT:"O Predador",PT:"O Atirador",PNT:"O Escudo","ANT+AT":"O Vendaval","AT+ANT":"O Furacão","AT+PNT":"O Guardião","AT+PT":"O Cirurgião","PNT+AT":"O Bastião Técnico","PT+AT":"O Mestre do Pulso","ANT+PNT":"A Fera","ANT+PT":"O Castigador","PNT+ANT":"O Feral","PT+ANT":"O Demolidor Silencioso","PNT+PT":"A Âncora","PT+PNT":"A Muralha","ANT+AT+PNT":"O Colosso do Centro","ANT+AT+PT":"O Estrategista Selvagem","ANT+PNT+AT":"","ANT+PT+AT":"O Incursor","AT+ANT+PNT":"O Inquebrantável","AT+ANT+PT":"O Arquiteto do Caos","AT+PNT+ANT":"O Leão Técnico","AT+PNT+PT":"O Guerreiro do Muro","AT+PT+ANT":"O Alquimista do Ritmo","AT+PT+PNT":"O Sábio de Ferro","PNT+ANT+AT":"A Fênix do Caos","PNT+AT+ANT":"O Legionário","PNT+AT+PT":"O Sentinela de Aço","PNT+PT+AT":"O Bastião do Ritmo","PT+ANT+AT":"O Construtor de Combate","PT+AT+ANT":"O Estrangulador Tático","PT+AT+PNT":"O Tático Blindado","PT+PNT+AT":"O Monge da Jaula","ANT+PNT+PT":"O Ciclone Imparável","ANT+PT+PNT":"O Gladiador Selvagem","PNT+ANT+PT":"O Martelo de Ferro","PNT+PT+ANT":"O Colosso Selvagem","PT+ANT+PNT":"O Bárbaro do Octógono","PT+PNT+ANT":"O Titã Silencioso"}};return(i[t]||i.es)[e]||e}function D(e){if(!e)return{type:"loading",label:"⭕",name:"Analizando...",tooltip:"Calculando arquetipo..."};const t=[],i=e.combinedRole.split("+"),[s,n,o]=i;[s,n,o].filter(c=>!!c).forEach(c=>{const a=Ne(c),l=R[c];t.push(`${l} ${a}`)}),e.inTransition&&t.push("En transición");const r=t.join(`
`);return{type:e.isTriple?"triple":e.isDual?"dual":"single",label:`${R[s]}${n?R[n]:""}${o?R[o]:""}`,name:Ne(e.inTransition?e.combinedRole:s),tooltip:r}}function rt(e,t){if(t.length===0)throw new Error(`No fighters data provided for division: ${e}`);const i=t.length,s=t.reduce((n,o)=>(n.Sig_Strikes_Thrown+=o.Sig_Strikes_Thrown,n.Sig_Strikes_Landed+=o.Sig_Strikes_Landed,n.Sig_Strikes_Absorbed+=o.Sig_Strikes_Absorbed,n.Takedowns_Attempted+=o.Takedowns_Attempted,n.Takedowns_Successful+=o.Takedowns_Successful,n.Takedowns_Defended+=o.Takedowns_Defended,n.Sub_Attempts+=o.Sub_Attempts,n.Sub_Attempts_Defended+=o.Sub_Attempts_Defended,n.Knockdowns+=o.Knockdowns,n.Knockdowns_Received+=o.Knockdowns_Received,n.Control_Time_Seconds+=o.Control_Time_Seconds,n.Time_Controlled_Seconds+=o.Time_Controlled_Seconds,n.height_inches+=o.height_inches,n.reach_inches+=o.reach_inches,n.win+=o.win,n.loss+=o.loss,n.draws+=o.draws,n.win_ko+=o.win_ko,n.win_tko+=o.win_tko,n.win_sub+=o.win_sub,n.win_decision+=o.win_decision,n.loss_ko+=o.loss_ko,n.loss_tko+=o.loss_tko,n.loss_sub+=o.loss_sub,n.loss_decision+=o.loss_decision,n.Fight_Duration_Seconds+=o.Fight_Duration_Seconds,n.significant_strikes_attempted_against+=o.significant_strikes_attempted_against,n.takedowns_attempted_against+=o.takedowns_attempted_against,n.takedowns_allowed+=o.takedowns_allowed,n.submission_attempts_against+=o.submission_attempts_against,n.Number_of_Fights_36m+=o.Number_of_Fights_36m,n),{Sig_Strikes_Thrown:0,Sig_Strikes_Landed:0,Sig_Strikes_Absorbed:0,Takedowns_Attempted:0,Takedowns_Successful:0,Takedowns_Defended:0,Sub_Attempts:0,Sub_Attempts_Defended:0,Knockdowns:0,Knockdowns_Received:0,Control_Time_Seconds:0,Time_Controlled_Seconds:0,height_inches:0,reach_inches:0,win:0,loss:0,draws:0,win_ko:0,win_tko:0,win_sub:0,win_decision:0,loss_ko:0,loss_tko:0,loss_sub:0,loss_decision:0,Fight_Duration_Seconds:0,significant_strikes_attempted_against:0,takedowns_attempted_against:0,takedowns_allowed:0,submission_attempts_against:0,Number_of_Fights_36m:0});return{id:"",Fighter:`${e} Average`,cleanName:`${e} Average`,Division:e,Career_Record:"",Sig_Strikes_Thrown:s.Sig_Strikes_Thrown/i,Sig_Strikes_Landed:s.Sig_Strikes_Landed/i,Sig_Strikes_Absorbed:s.Sig_Strikes_Absorbed/i,Takedowns_Attempted:s.Takedowns_Attempted/i,Takedowns_Successful:s.Takedowns_Successful/i,Takedowns_Defended:s.Takedowns_Defended/i,Sub_Attempts:s.Sub_Attempts/i,Sub_Attempts_Defended:s.Sub_Attempts_Defended/i,Knockdowns:s.Knockdowns/i,Knockdowns_Received:s.Knockdowns_Received/i,Control_Time_Seconds:s.Control_Time_Seconds/i,Time_Controlled_Seconds:s.Time_Controlled_Seconds/i,height_inches:s.height_inches/i,reach_inches:s.reach_inches/i,win:s.win/i,loss:s.loss/i,draws:s.draws/i,win_ko:s.win_ko/i,win_tko:s.win_tko/i,win_sub:s.win_sub/i,win_decision:s.win_decision/i,loss_ko:s.loss_ko/i,loss_tko:s.loss_tko/i,loss_sub:s.loss_sub/i,loss_decision:s.loss_decision/i,Fight_Duration_Seconds:s.Fight_Duration_Seconds/i,significant_strikes_attempted_against:s.significant_strikes_attempted_against/i,takedowns_attempted_against:s.takedowns_attempted_against/i,takedowns_allowed:s.takedowns_allowed/i,submission_attempts_against:s.submission_attempts_against/i,Number_of_Fights_36m:s.Number_of_Fights_36m/i,Dates_36m:"",picture_url:"",ufcstats_url:""}}function ve(e){return!e||typeof e!="string"?"":e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]/g,"").trim()}function ct(e){return!e||typeof e!="string"?"":e.replace(/W_/g,"Women's ").replace(/_/g," ")}function Je(e){if(!e||e==="N/A")return[];const t=e.split(",").map(s=>s.trim()).filter(s=>s),i=new Date;return t.map(s=>{let n,o,r,c="";if(s.includes(":")){const _=s.split(":"),m=_[0];c=_[1]||"";let d="";if(_.length>=3&&(d=_[2]),m.includes("-")){const[f,F,A]=m.split("-");n=F,o=A,r=new Date(parseInt(A),parseInt(F)-1,parseInt(f))}else[n,o]=m.split("/"),r=new Date(2e3+parseInt(o),parseInt(n)-1);d&&(c+=`|${d}`)}else[n,o]=s.split("/"),r=new Date(2e3+parseInt(o),parseInt(n)-1);let a="",l=c;if(c.includes("|")){const _=c.split("|");l=_[0],a=_[1]}if(!n||!o)return{original:s,monthsAgo:0,fighterId:l,fighter:ke.getFighterById(l),dateString:s,result:a||void 0};const h=i.getTime()-r.getTime(),u=Math.floor(h/(1e3*60*60*24*30.44)),T=String(n).padStart(2,"0"),g=o.length===4?o.slice(2):o;return{original:`${T}/${g}`,monthsAgo:Math.max(0,u),fighterId:l,fighter:ke.getFighterById(l),dateString:`${T}/${g}`,result:a||void 0}}).sort((s,n)=>s.monthsAgo-n.monthsAgo)}function Ze(e){return!e||typeof e!="string"?"":e.replace(/\s*\([^)]*\)\s*/g,"").trim()}function Xe(e){return e>=85?"ELITE":e>=75?"CONTENDER":e>=65?"SOLID":e>=50?"MEDIOCRE":"TERRIBLE"}const Ve={ELITE:{W:10,L:7,D:8,NC:0},CONTENDER:{W:8,L:5,D:6,NC:0},SOLID:{W:6,L:3,D:4,NC:0},MEDIOCRE:{W:4,L:1,D:2,NC:0},TERRIBLE:{W:2,L:0,D:1,NC:0}};function et(e,t){if(e!=="W"||!t)return 1;switch(t.toUpperCase()){case"KO":case"TKO":case"KO/TKO":return 1.3;case"SUB":case"SUBMISSION":return 1.2;case"DEC":case"DECISION":return 1;default:return 1}}function tt(e){if(!e||e.length===0)return 0;let t=0,i=0;if(e.forEach(o=>{if(!o.opponent||typeof o.opponent.overall!="number")return;const r=Xe(o.opponent.overall),c=Ve[r]?.[o.result]??0,a=et(o.result,o.method),l=c*a;t+=l,i++}),i===0)return 0;const s=t/i,n=Math.max(0,Math.min(10,s));return Math.round(n*100)/100}export{rt as a,ct as b,ve as c,nt as d,ot as e,ke as f,D as g,Je as p};
